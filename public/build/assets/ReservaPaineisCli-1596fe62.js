import{j as r,y as N,o as i,f as n,a as P,u as m,w as L,F as p,Z as M,b as e,d as x,t as c,k as b,x as S,B,l as g,g as w,v as F}from"./app-bd8ed453.js";import{_ as Z}from"./AuthenticatedLayout-18cc19d3.js";import q from"./ModalAddPainCli-e5122ad7.js";import{u as H}from"./toastr-56ff4fca.js";import"./XMarkIcon-0fe4e5a0.js";import"./transition-a66b7804.js";import"./vue-multiselect.esm-ceb5eeeb.js";const J={class:"w-full h-screen pt-20 pb-32 mx-2 md:mx-4"},K={class:"w-full h-14 flex mb-2"},Q={class:"sm:w-2/12 h-14 flex items-center"},W=e("h1",{class:"titulo"},"Reservas por Cliente ",-1),X={class:"text-red-500 font-bold ml-2"},Y={class:"w-full flex flex-row flex-wrap items-center justify-center mb-20 sm:mb-0"},ee={class:"w-full flex items-center sm:justify-center flex-wrap"},ae={class:"w-[30%] sm:w-[8%] flex flex-col me-4 sm:me-6"},te=e("label",{for:"bi-semana"},"Ano",-1),se=e("option",{value:"0",selected:""},"Selecione",-1),le=["value"],oe={class:"w-[61%] sm:w-[20%] flex flex-col me-4 sm:me-6"},ie=e("label",{for:"bi-semana"},"Bi-Semana",-1),ne=e("option",{value:"0",selected:""},"Selecione",-1),ce=["value"],de={class:"w-full sm:w-[20%] flex flex-col me-4 sm:me-6"},re=e("label",{for:"status"},"Cliente",-1),ue=["disabled"],me=e("option",{value:"0",selected:""},"Selecione",-1),fe=["value"],ve={class:"w-full sm:w-[20%] flex mt-2 space-x-4"},_e={key:1,for:"modal-add-painel",class:"w-fit botao-modal bg-slate-700 hover:bg-slate-500 px-2 transition-all duration-1000"},he={key:2,for:"modal-add-painel",class:"w-fit botao-modal bg-red-700 hover:bg-red-500 px-2 transition-all duration-1000"},pe={key:3,for:"modal-canc-res-cli",class:"w-fit botao-danger px-2 transition-all duration-1000"},xe={class:"card w-full h-full max-h-[97%] bg-base-100 shadow-xl overflow-auto rounded-md"},be={class:"card-body flex flex-col sm:flex-row"},ge={class:"w-full flex flex-col flex-wrap md:flex-row"},we=["id","onClick"],ke={class:"w-full -mt-6 flex justify-end"},Ce={class:"w-full flex"},ye={class:"w-5/12 mb-4 -ml-6 -mt-4"},Pe=["src"],Se={class:"w-7/12 mb-4 ml-4 -mt-4 space-y-2"},Be=e("span",{class:"font-bold text-sm text-red-500"},"Painel: ",-1),Re={class:"font-extrabold text-xs"},Ve=e("br",null,null,-1),je=e("span",{class:"font-bold text-sm text-red-500"},"Campanha: ",-1),De={class:"font-extrabold text-xs"},Ee=e("br",null,null,-1),Ie=e("span",{class:"font-bold text-sm text-red-500"},"Obs.: ",-1),$e={class:"font-extrabold text-xs"},Ge=e("input",{type:"checkbox",id:"modal-canc-res-cli",class:"modal-toggle"},null,-1),Oe={class:"modal flex items-end md:items-center"},Te={method:"dialog",class:"modal-box bg-white"},Ue={class:"font-black text-2xl animate-pulse duration-200 text-center mb-2"},ze=e("h3",{class:"font-black text-2xl text-red-700 animate-pulse duration-200 text-center"},"ATENÇÃO!",-1),Ae=e("p",{class:"py-4"},"Ao cancelar esta reserva, o painel ficará disponível na Bi-semana selecionada, e poderá ser reservado imadiatamente.",-1),Ne=e("p",{class:"py-4 text-center"},"Confirme somente se tiver certeza do cancelamento!",-1),Le=e("label",{for:"paineis-del"},"Painéis Selecionados",-1),Me={class:"modal-action"},Fe={class:"w-full flex justify-center space-x-4"},Ze=e("label",{for:"modal-canc-res-cli",class:"w-5/12 text-sm botao-modal bg-gray-700 hover:bg-gray-500"},"Manter Painéis",-1),ea={__name:"ReservaPaineisCli",props:["ambiente","clientes","anos","bisemanas","paineis"],setup(k){const R=k,_=r(R.paineis),V=H(),f=r([]),C=r([]),u=r([]);let v=N([]);const h=r([]),j=r(0),y=r(0);let l=r(0),D=r("");const d=r(0);function E(s){s.forEach(a=>{v.push("Painel: "+a.identificacao+"; End: "+a.logradouro+" - "+a.numero+"; Ref: "+a.ponto_referencia+" - id:   "+a.id)})}function G(s){l.value=0,axios.post("/GetPaineisCli",{bsId:d.value,cliente:l.value}).then(a=>{f.value=a.data.reservas,_.value=a.data.paineis,v.length=0,v.length==0&&E(_.value)})}function I(){u.value=[],h.value=[],C.value.forEach(a=>{a.checked=!1})}function O(s,a,t){const o=C.value[s];o.classList,Object.values(u.value).includes(a)?(u.value.splice(u.value.indexOf(a),1),h.value.splice(u.value.indexOf(t),1),o.checked=!1):(u.value.push(a),h.value.push(t),o.checked=!0)}function T(s){if(R.ambiente=="local")var a="http://localhost:8000/storage/"+s;else var a="/storage/"+s;return a}function U(){axios.post("/GetBisemanas",{bisemana:y.value}).then(s=>{j.value=Object.values(s.data),d.value=0,f.value=[]})}function z(s){axios.post("/GetPaineisCli",{bsId:s,cliente:l.value}).then(a=>{f.value=a.data.reservas,_.value=a.data.paineis,v.length=0,v.length==0&&E(_.value)})}function $(s){axios.post("/GetPaineisCli",{bsId:s,cliente:l.value}).then(a=>{f.value=a.data.reservas,_.value=a.data.paineis}),axios.post("/GetCliente",{cliente:l}).then(a=>{D.value=a.data})}function A(){axios.post("/DelResCliente",{paineisId:h.value,bs:d.value}).then(s=>{$(d.value),s.data.cod===0?V.error(s.data.msg):s.data.cod==1&&V.success(s.data.msg)})}return(s,a)=>(i(),n(p,null,[P(m(M),{title:"Painéis"}),P(Z,null,{default:L(()=>[e("div",J,[e("div",K,[e("div",Q,[W,x(),e("p",X,c(f.value.length),1)])]),e("div",Y,[e("div",ee,[e("div",ae,[te,b(e("select",{class:"select-paineis",name:"ano",id:"ano","onUpdate:modelValue":a[0]||(a[0]=t=>y.value=t),onChange:a[1]||(a[1]=t=>(B(l)?l.value=0:l=0,U()))},[se,(i(!0),n(p,null,g(k.anos,(t,o)=>(i(),n("option",{key:o,value:t.id},c(t.ano_bisemana),9,le))),128))],544),[[S,y.value]])]),e("div",oe,[ie,b(e("select",{class:"select-paineis",name:"bi-semana",id:"bi-semama","onUpdate:modelValue":a[2]||(a[2]=t=>d.value=t),onChange:a[3]||(a[3]=t=>(B(l)?l.value=0:l=0,z(d.value)))},[ne,(i(!0),n(p,null,g(j.value,(t,o)=>(i(),n("option",{key:o,value:t.id},"BS: "+c(t.num_bisemana)+" "+c(new Date(t.inicio).toLocaleDateString("pt-br",{timeZone:"UTC"}))+" até "+c(new Date(t.fim).toLocaleDateString("pt-br",{timeZone:"UTC"})),9,ce))),128))],544),[[S,d.value]])]),e("div",de,[re,b(e("select",{class:"select-paineis",name:"cliente",id:"cliente","onUpdate:modelValue":a[4]||(a[4]=t=>B(l)?l.value=t:l=t),disabled:d.value==0,onChange:a[5]||(a[5]=t=>($(d.value),I()))},[me,(i(!0),n(p,null,g(k.clientes,(t,o)=>(i(),n("option",{value:t.id,key:o},c(t.nome_fantasia?t.nome_fantasia:t.razao_social),9,fe))),128))],40,ue),[[S,m(l)]])]),e("div",ve,[m(l)!=0?(i(),n("label",{key:0,onClick:a[6]||(a[6]=t=>I()),for:"modal-add-painel",class:"w-fit botao-modal px-2 transition-all duration-1000"},"Incluir painéis")):w("",!0),m(l)!=0?(i(),n("label",_e,"Gerar PI")):w("",!0),m(l)!=0?(i(),n("label",he,"Excluir Reserva")):w("",!0),m(l)!=0&&u.value.length>0?(i(),n("label",pe,"Excluir Selecionados")):w("",!0)])])]),e("div",xe,[e("div",be,[e("div",ge,[(i(!0),n(p,null,g(f.value,(t,o)=>(i(),n("div",{key:o,class:"card w-full sm:w-[30%] card-reserva-cliente"},[e("div",{class:"card-body flex",id:o,onClick:qe=>O(o,t.identificacao,t.id)},[e("div",ke,[e("input",{type:"checkbox",ref_for:!0,ref_key:"itemRefs",ref:C,class:"border-0 checkbox checkbox-success"},null,512)]),e("div",Ce,[e("div",ye,[e("img",{class:"w-36 h-24",src:T(t.image_url),alt:"Foto-painel"},null,8,Pe)]),e("div",Se,[Be,e("span",Re,c(t.identificacao)+" - "+c(t.nome_fantasia?t.nome_fantasia:t.razao_social),1),Ve,je,x(),e("span",De,c(t.campanha),1),x(),Ee,Ie,x(),e("span",$e,c(t.obs),1)])])],8,we)]))),128))])])]),P(q,{clienteSel:m(D),idents:m(v),idBisemana:d.value,onAtualizaPage:G},null,8,["clienteSel","idents","idBisemana"]),Ge,e("div",Oe,[e("form",Te,[e("h3",Ue,"Cancelar Reserva: Painéis "+c(h.value),1),ze,Ae,Ne,Le,b(e("textarea",{class:"w-full input input-bordered",type:"text",name:"paineis-del",id:"paineis-del","onUpdate:modelValue":a[7]||(a[7]=t=>u.value=t),disabled:""},null,512),[[F,u.value]]),e("div",Me,[e("div",Fe,[e("label",{onClick:a[8]||(a[8]=t=>A()),for:"modal-canc-res-cli",class:"w-5/12 text-sm botao-modal bg-red-700 hover:bg-red-500"},"Cancelar Painéis"),Ze])])])])])]),_:1})],64))}};export{ea as default};
