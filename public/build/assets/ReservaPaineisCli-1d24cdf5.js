import{j as o,z as G,k as Z,o as d,f as r,a as _,u as m,w as q,F as b,Z as H,b as e,d as x,t as u,m as A,y as D,p as B,$ as J,g as E,v as K}from"./app-cc449fe3.js";import{_ as Q}from"./AuthenticatedLayout-50e568ff.js";import{u as W}from"./toastr-38af5969.js";import X from"./AddReserva-d5e9b9d6.js";import Y from"./EditReserva-6fcfd696.js";import{s as ee}from"./vue-multiselect.esm-0ef9c773.js";/* empty css              */import"./transition-da6d0184.js";import"./XMarkIcon-6d17bc51.js";import"./toastr-26786df3.js";/* empty css                   */import"./painel_conv-45a82d16.js";import"./regiao-35565801.js";import"./functions-56098775.js";import"./html2pdf-63a74ed2.js";import"./ClipboardDocumentCheckIcon-850fd814.js";import"./ModalPiRes-10114ec9.js";import"./StepOnePi-f7cf6aaa.js";import"./maska-1eacf752.js";import"./UserCircleIcon-4fef8515.js";import"./StepTwoPi-1c4d800d.js";import"./StepThreePi-e6dbbbc5.js";const te={class:"w-full h-screen pt-20 pb-32 mx-2 md:mx-4"},se={class:"w-full h-14 flex mb-2"},ae={class:"sm:w-2/12 h-14 flex items-center"},le=e("h1",{class:"titulo"},"Reservas por Cliente ",-1),oe={class:"text-red-500 font-bold ml-2"},ie={class:"w-full flex flex-row flex-wrap items-center justify-center mb-20 sm:mb-0"},ne={class:"w-full flex items-center sm:justify-center flex-wrap"},ce={class:"w-[30%] sm:w-[8%] flex flex-col me-4 sm:me-6"},de=e("label",{for:"bi-semana"},"Ano",-1),re=e("option",{value:"0",selected:""},"Selecione",-1),ue=["value"],me={class:"w-[61%] sm:w-[20%] flex flex-col me-4 sm:me-6"},fe=e("label",{for:"bi-semana"},"Bi-Semana",-1),pe=e("option",{value:"0",selected:""},"Selecione",-1),ve=["value"],_e={class:"w-full sm:w-[20%] flex flex-col sm:-mt-5 me-4 sm:me-6"},he=e("label",{for:"status"},"Cliente",-1),be={class:"w-full sm:w-[20%] flex mt-2 space-x-4"},xe={key:2,for:"modal-canc-res-cli",class:"w-fit botao-danger px-2 transition-all duration-1000"},we={class:"card w-full h-full max-h-[97%] bg-base-100 shadow-xl overflow-auto rounded-md"},ge={class:"card-body flex flex-col sm:flex-row"},ke={class:"w-full flex flex-col flex-wrap md:flex-row"},Ce=["id","onClick"],ye={class:"w-full -mt-6 flex justify-end"},Pe={class:"w-full flex"},Re={class:"w-5/12 mb-4 -ml-6 -mt-4"},Se=["src"],Ae={class:"w-7/12 mb-4 ml-4 -mt-4 space-y-2"},Be=e("span",{class:"font-bold text-sm text-red-500"},"Painel: ",-1),Ee={class:"font-extrabold text-xs"},Ve=e("br",null,null,-1),$e=e("span",{class:"font-bold text-sm text-red-500"},"Campanha: ",-1),je={class:"font-extrabold text-xs"},De=e("br",null,null,-1),Oe=e("span",{class:"font-bold text-sm text-red-500"},"Obs.: ",-1),Ie={class:"font-extrabold text-xs"},Le=e("input",{type:"checkbox",id:"modal-canc-res-cli",class:"modal-toggle"},null,-1),Te={class:"modal flex items-end md:items-center"},Ue={method:"dialog",class:"modal-box bg-white"},Ne={class:"font-black text-2xl animate-pulse duration-200 text-center mb-2"},Me=e("h3",{class:"font-black text-2xl text-red-700 animate-pulse duration-200 text-center"},"ATENÇÃO!",-1),ze=e("p",{class:"py-4"},"Ao cancelar esta reserva, o painel ficará disponível na Bi-semana selecionada, e poderá ser reservado imadiatamente.",-1),Fe=e("p",{class:"py-4 text-center"},"Confirme somente se tiver certeza do cancelamento!",-1),Ge=e("label",{for:"paineis-del"},"Painéis Selecionados",-1),Ze={class:"modal-action"},qe={class:"w-full flex justify-center space-x-4"},He=e("label",{for:"modal-canc-res-cli",class:"w-5/12 text-sm botao-modal bg-gray-700 hover:bg-gray-500"},"Manter Painéis",-1),ht={__name:"ReservaPaineisCli",props:["ambiente","clientes","anos","bisemanas","paineis"],setup(w){const h=w,f=o(h.paineis),V=W(),p=o([]),g=o([]),n=o([]);o(Object.keys(h.clientes).map(a=>h.clientes[a]));let k=G([]);const v=o([]),$=o(0),C=o(0);let l=o(""),O=o("");const c=o(0),y=o(!1),P=o(!1);Z(l,a=>{j(c.value),R()});function I({id:a,nome_fantasia:t,razao_social:s}){return`${t||s}`}function L(a){a.forEach(t=>{k.push("Painel: "+t.identificacao+"; End: "+t.logradouro+" - "+t.numero+"; Ref: "+t.ponto_referencia+" - id:   "+t.id)})}function R(){n.value=[],v.value=[],g.value.forEach(t=>{t.checked=!1})}function T(a,t,s){const i=g.value[a];i.classList,Object.values(n.value).includes(t)?(n.value.splice(n.value.indexOf(t),1),v.value.splice(n.value.indexOf(s),1),i.checked=!1):(n.value.push(t),v.value.push(s),i.checked=!0)}function U(a){if(h.ambiente=="local")var t="http://localhost:8000/storage/"+a;else var t="/storage/"+a;return t}function N(){axios.post("/getBisemanas",{anoId:C.value}).then(a=>{$.value=Object.values(a.data),c.value=0,p.value=[]})}function M(a){axios.post("/GetPaineisCli",{bsId:a,cliente:l.value}).then(t=>{p.value=t.data.reservas,f.value=t.data.paineis,k.length=0,k.length==0&&L(f.value)})}function j(a){axios.post("/GetPaineisCli",{bsId:a,cliente:l.value}).then(t=>{p.value=t.data.reservas,f.value=t.data.paineis}),axios.post("/GetCliente",{cliente:l}).then(t=>{O.value=t.data})}function z(){axios.post("/DelResCliente",{paineisId:v.value,bs:c.value}).then(a=>{console.log(a.data),j(c.value),a.data.cod===0?V.error(a.data.msg):a.data.cod==1&&V.success(a.data.msg),R()})}function S(a){a==="t"?y.value=!0:y.value=!1}function F(a){a==="t"?P.value=!0:P.value=!1}return(a,t)=>(d(),r(b,null,[_(m(H),{title:"Painéis"}),_(Q,null,{default:q(()=>[e("div",te,[e("div",se,[e("div",ae,[le,x(),e("p",oe,u(p.value.length),1)])]),e("div",ie,[e("div",ne,[e("div",ce,[de,A(e("select",{class:"select-paineis",name:"ano",id:"ano","onUpdate:modelValue":t[0]||(t[0]=s=>C.value=s),onChange:t[1]||(t[1]=s=>N())},[re,(d(!0),r(b,null,B(w.anos,(s,i)=>(d(),r("option",{key:i,value:s.id},u(s.ano_bisemana),9,ue))),128))],544),[[D,C.value]])]),e("div",me,[fe,A(e("select",{class:"select-paineis",name:"bi-semana",id:"bi-semama","onUpdate:modelValue":t[2]||(t[2]=s=>c.value=s),onChange:t[3]||(t[3]=s=>M(c.value))},[pe,(d(!0),r(b,null,B($.value,(s,i)=>(d(),r("option",{key:i,value:s.id},"BS: "+u(s.num_bisemana)+" "+u(new Date(s.inicio).toLocaleDateString("pt-br",{timeZone:"UTC"}))+" até "+u(new Date(s.fim).toLocaleDateString("pt-br",{timeZone:"UTC"})),9,ve))),128))],544),[[D,c.value]])]),e("div",_e,[he,_(m(ee),{disabled:c.value==0,modelValue:m(l),"onUpdate:modelValue":t[4]||(t[4]=s=>J(l)?l.value=s:l=s),options:w.clientes,"custom-label":I,selectLabel:"Enter para selecionar",multiple:!1,"close-on-select":!0,"show-labels":!0,placeholder:"Selecione o Cliente"},null,8,["disabled","modelValue","options"])]),e("div",be,[m(l)!=0?(d(),r("label",{key:0,onClick:t[5]||(t[5]=s=>(R(),S("t"))),for:"modal-add-painel",class:"w-fit botao-modal px-2 transition-all duration-1000"},"Incluir painéis")):E("",!0),m(l)!=0&&n.value.length>0?(d(),r("label",{key:1,onClick:t[6]||(t[6]=s=>F("t")),for:"modal-add-painel",class:"w-fit botao-modal bg-amber-600 hover:bg-amber-400 px-2 transition-all duration-1000"},"Editar Reservas")):E("",!0),m(l)!=0&&n.value.length>0?(d(),r("label",xe,"Excluir Selecionados")):E("",!0)])])]),e("div",we,[e("div",ge,[e("div",ke,[(d(!0),r(b,null,B(p.value,(s,i)=>(d(),r("div",{key:i,class:"card w-full sm:w-[30%] card-reserva-cliente"},[e("div",{class:"card-body flex",id:i,onClick:Je=>T(i,s.identificacao,s.id)},[e("div",ye,[e("input",{type:"checkbox",ref_for:!0,ref_key:"itemRefs",ref:g,class:"border-0 checkbox checkbox-success"},null,512)]),e("div",Pe,[e("div",Re,[e("img",{class:"w-36 h-24",src:U(s.image_url),alt:"Foto-painel"},null,8,Se)]),e("div",Ae,[Be,e("span",Ee,u(s.identificacao)+" - "+u(s.nome_fantasia?s.nome_fantasia:s.razao_social),1),Ve,$e,x(),e("span",je,u(s.campanha),1),x(),De,Oe,x(),e("span",Ie,u(s.obs),1)])])],8,Ce)]))),128))])])]),_(X,{openAdd:y.value,cliente:m(l),paineis:f.value,bisemana:c.value,onCloseAdd:S},null,8,["openAdd","cliente","paineis","bisemana"]),_(Y,{openAdd:P.value,cliente:m(l),paineis:f.value,bisemana:c.value,onCloseAdd:S},null,8,["openAdd","cliente","paineis","bisemana"]),Le,e("div",Te,[e("form",Ue,[e("h3",Ne,"Cancelar Reserva: Painéis "+u(v.value),1),Me,ze,Fe,Ge,A(e("textarea",{class:"w-full input input-bordered",type:"text",name:"paineis-del",id:"paineis-del","onUpdate:modelValue":t[7]||(t[7]=s=>n.value=s),disabled:""},null,512),[[K,n.value]]),e("div",Ze,[e("div",qe,[He,e("label",{onClick:t[8]||(t[8]=s=>z()),for:"modal-canc-res-cli",class:"w-5/12 text-sm botao-modal bg-red-700 hover:bg-red-500"},"Cancelar Painéis")])])])])])]),_:1})],64))}};export{ht as default};
