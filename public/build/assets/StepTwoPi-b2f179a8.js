import{j as n,Q as Y,k as T,z as ee,o as g,f as v,b as e,a as N,u as x,t as b,m as l,v as f,y as q,F as E,p as A,n as R,$ as te,g as se,l as j,V as oe}from"./app-a0ee21ef.js";import{j as w}from"./maska-1eacf752.js";import{u as ae}from"./toastr-4cdd8a3e.js";import{r as B}from"./UserCircleIcon-50c93c40.js";import"./toastr-6cc5e9af.js";/* empty css                   */const ne={class:"space-y-6"},ie={class:"mt-3 text-center sm:mt-0 sm:text-left"},le=e("h1",{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},"Pedido de Inserção",-1),de={class:"flex mt-2"},re=e("p",{class:"text-sm text-gray-500 mb-4"},"Confira os dados para criação do Pedido de Inserção.",-1),ce={class:"text-xs font-bold text-red-500 text-center"},ue={class:"flex w-full space-x-6"},me={class:"sm:w-5/12"},ge=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Painéis",-1),ve={class:"mt-2"},fe={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},xe=e("span",{class:"flex select-none items-center pl-3 text-gray-500 sm:text-sm"},null,-1),pe={class:"w-6/12"},_e=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Campanha",-1),he={class:"mt-2"},be={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},we=e("span",{class:"flex select-none items-center pl-3 text-gray-500 sm:text-sm"},null,-1),ye=["disabled"],ke={class:"flex w-full space-x-6"},Se={class:"w-full"},Pe=e("label",{for:"",class:"block text-sm font-medium leading-6 text-gray-900"},"Serviço:",-1),Ve=["disabled"],Fe=e("option",{value:"0",disabled:""},"Selecione um Serviço",-1),De=["value"],Ue={class:"w-11/12 flex flex-wrap space-x-0 sm:space-x-6 space-y-4 sm:space-y-0 border sm:border-0 border-sky-300 rounded-lg py-4 mb-2 sm:mb-0"},Ie={class:"w-10/12 sm:w-8/12"},Ce=e("label",{for:"desc_servico",class:"block text-sm font-medium leading-6 text-gray-900"},"Serviço",-1),Te={class:"mt-2"},qe={class:"w-10/12 sm:w-3/12"},Ee=e("label",{for:"quantidade",class:"block text-sm font-medium leading-6 text-gray-900"},"Quantidade",-1),Ae={class:"mt-2"},je={class:"w-full flex justify-center space-x-4"},Le={class:"w-10/12 sm:w-3/12"},Oe=e("label",{for:"vlr_unit",class:"block text-sm font-medium leading-6 text-gray-900"},"Valor Unit.",-1),$e={class:"mt-2"},Ne={class:"w-10/12 sm:w-3/12"},Re=e("label",{for:"vlr_desc",class:"block text-sm font-medium leading-6 text-gray-900"},"Desc. Unit.",-1),Be={class:"mt-2"},Qe={class:"w-10/12 sm:w-3/12"},Me=e("label",{for:"vlr_total",class:"block text-sm font-medium leading-6 text-gray-900"},"Valor Total",-1),ze={class:"mt-2"},Xe={class:"w-10/12 sm:w-1/12 pt-[1.95rem]"},Ze={class:"w-full pt-4"},Ge=e("label",{for:"detalhes",class:"block text-sm font-medium leading-6 text-gray-900"},"Detalhes",-1),He={class:"mt-2"},Ke=["disabled"],Je={class:"w-10/12 sm:w-[28%]"},We=e("label",{for:"desc_servico",class:"block text-sm font-medium leading-6 text-gray-900"},"Serviço",-1),Ye={class:""},et=["value"],tt={class:"w-10/12 sm:w-[15%]"},st=e("label",{for:"quantidade",class:"block text-sm font-medium leading-6 text-gray-900"},"Qtde.",-1),ot={class:""},at=["value"],nt={class:"w-10/12 sm:w-[20%]"},it=e("label",{for:"vlr_total",class:"block text-sm font-medium leading-6 text-gray-900"},"Valor Total",-1),lt={class:""},dt=["value"],rt={class:"w-10/12 sm:w-[10%] pt-[1.45rem]"},ct=["onClick"],ut={class:"w-full flex flex-wrap justify-center sm:space-x-6 space-y-6 sm:space-y-0"},mt={class:"w-full sm:w-5/12"},gt=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Forma de Pagamento",-1),vt={class:"mt-2"},ft={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},xt=["disabled"],pt=oe('<option value="0" disabled selected>SELECIONE</option><option value="1">A VISTA DINHEIRO</option><option value="2">A VISTA PIX</option><option value="3">CARTÃO</option><option value="4">BOLETO</option><option value="5">DEPÓSITO</option>',6),_t=[pt],ht={class:"w-5/12 sm:w-[20%] me-6"},bt=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Pago",-1),wt={class:"mt-2"},yt={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},kt=["disabled"],St=e("option",{value:"",disabled:"",selected:""},"SEL...",-1),Pt=e("option",{value:"0"},"NÃO",-1),Vt=e("option",{value:"1"},"SIM",-1),Ft=[St,Pt,Vt],Dt={class:"w-5/12 sm:w-3/12"},Ut=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Data Pagamento",-1),It={class:"mt-2"},Ct={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},Tt=e("span",{class:"flex select-none items-center pl-3 text-gray-500 sm:text-sm"},null,-1),qt=["disabled"],Et={class:"flex flex-wrap w-full space-x-6"},At={class:"sm:w-3/12"},jt=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Data da Reserva",-1),Lt={class:"mt-2"},Ot={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 bg-gray-200"},$t=e("span",{class:"flex select-none items-center pl-3 text-gray-500 sm:text-sm"},null,-1),Nt={class:"sm:w-4/12"},Rt=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Vendedor",-1),Bt={class:"mt-2"},Qt={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},Mt=["disabled"],zt=e("option",{value:"0",disabled:"",selected:""},"SELECIONE",-1),Xt=["value"],Zt={class:"w-full sm:flex sm:flex-row-reverse"},ss={__name:"StepTwoPi",props:["cliente","campanha","paineis","bisemana"],emits:["nextStep","formTwo"],setup(y,{emit:Q}){const r=ae(),P=y,_=Q,m=n(!1),M=Y().props.user.permissions.includes("liberar emissao pi"),V=n(),L=new Date,F=L.toLocaleDateString(),k=n(),D=n(),h=n(0),u=n(1),z=n(0),S=n(""),p=n([]),i=n(0),d=n(0),c=n(),U=n(""),X=n(L.toLocaleDateString()),Z=n();T(i,a=>{i.value=a,o.vlr_unit=a,parseFloat(d.value)>parseFloat(i.value)?c.value=0:(c.value=((parseFloat(i.value)-parseFloat(d.value))*parseFloat(u.value)).toFixed(2),o.vlr_total=c.value)}),T(d,a=>{d.value=a,o.vlr_desc=a,parseFloat(d.value)>parseFloat(i.value)?c.value=0:(c.value=((parseFloat(i.value)-parseFloat(d.value))*parseFloat(u.value)).toFixed(2),o.vlr_total=c.value)}),T(u,a=>{u.value=a,parseFloat(d.value)>parseFloat(i.value)?c.value=0:(c.value=((parseFloat(i.value)-parseFloat(d.value))*parseFloat(u.value)).toFixed(2),o.vlr_total=c.value)});function G(){return j.get("/getUsuarios").then(a=>{k.value=a.data}).catch(a=>{console.log(a)}),k}const H=a=>{V.value=k.value.find(t=>t.id==a),o.vendedorId=V.value.id,o.vendedor=V.value.name};function K(a){j.post("/GetServico",{id_servico:a}).then(t=>{z.value=t.data.id,S.value=t.data}).catch(t=>{r.error(res.data.message)})}function I(){return j.get("/ListaServicos").then(a=>{D.value=a.data.filter(t=>!p.value.some(s=>s.nome===t.nome))}).catch(a=>{console.log(a)}),D}function J(){if(parseInt(u.value)>parseInt(P.paineis[0].length)){r.error("Quantidade do serviço é maior que a quantidade de Painéis disponíveis!");return}if(parseInt(u.value)<1){r.error("Quantidade do serviço não pode ser menor que 1 !");return}if(parseFloat(i.value)<1){r.error("Valor Unitário do serviço não pode ser menor que 1.00 !");return}if(parseFloat(d.value)>parseFloat(i.value)){r.error("Valor do Desconto não pode ser maior que o Valor Unitário !");return}p.value.push({nome:S.value.nome,quantidade:u.value,vlr_unit:i.value,vlr_desc:d.value,vlr_total:c.value,detalhes:U.value}),h.value=0,u.value=1,i.value=0,d.value=0,I()}function W(a){p.value.splice(a,1),I()}const o=ee({paineis:P.paineis,campanha:P.campanha,servicos:p,formaPgto:0,pgto:"",dtPgto:X.value,dtReserva:Z.value,vendedorId:"",vendedor:""}),C=a=>{if(a==1&&_("nextStep",a),a==3){if(p.value.length==0){r.error("Adicione ao menos um Serviço");return}if(o.formaPgto==0){r.error("Selecione a Forma de Pagamento");return}if(o.pgto==""){r.error("Informe se o Pedido foi Pago");return}if(o.pgto==1&&o.dtPgto==""){r.error("Informe a Data de Pagamento");return}if(o.pgto==1&&o.dtPgto.length<10||o.dtPgto.length>10){r.error("Data de Pagamento Inválida");return}if(o.pgto==1&&o.dtPgto.length==10){let t=o.dtPgto.split("/");if(new Date(t[2],t[1]-1,t[0])>new Date){r.error("Data de Pagamento não pode ser maior que a Data Atual");return}}if(o.vendedorId==0){r.error("Selecione o Vendedor");return}_("nextStep",a),_("formTwo",o)}a==5&&(_("formTwo",o),_("nextStep",a))};function O(){I(),G(),m.value===!1&&(m.value=!0)}return(a,t)=>(g(),v("div",ne,[e("div",ie,[le,e("div",de,[re,m.value?(g(),v("button",{key:1,class:"w-8 h-8 flex items-center justify-center bg-green-700 -mt-1 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 rounded-full duration-1000",onClick:t[1]||(t[1]=s=>O()),title:"Edição Ativada"},[N(x(B),{class:"h-6 w-6","aria-hidden":"true"})])):(g(),v("button",{key:0,class:"w-8 h-8 flex items-center justify-center bg-amber-700 -mt-1 text-sm font-semibold text-white shadow-sm hover:bg-amber-500 sm:ml-3 rounded-full duration-1000",onClick:t[0]||(t[0]=s=>O()),title:"Ativar Edição"},[N(x(B),{class:"h-6 w-6","aria-hidden":"true"})]))]),e("p",ce,"Bi-Semana: "+b(y.bisemana.num_bisemana)+" "+b(new Date(y.bisemana.inicio).toLocaleDateString("pt-br",{timeZone:"UTC"}))+" até "+b(new Date(y.bisemana.fim).toLocaleDateString("pt-br",{timeZone:"UTC"})),1)]),e("div",ue,[e("div",me,[ge,e("div",ve,[e("div",fe,[xe,l(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>o.paineis=s),class:"h-9 block flex-1 border-0 bg-transparent py-1.5 pl-1 text-red-500 font-extrabold placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 text-xs",disabled:""},null,512),[[f,o.paineis]])])])]),e("div",pe,[_e,e("div",he,[e("div",be,[we,l(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>o.campanha=s),class:"h-9 block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 text-xs",disabled:m.value==!1},null,8,ye),[[f,o.campanha]])])])])]),e("div",ke,[e("div",Se,[Pe,l(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>h.value=s),onChange:t[5]||(t[5]=s=>K(h.value)),class:"w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",disabled:m.value==!1},[Fe,(g(!0),v(E,null,A(D.value,s=>(g(),v("option",{key:s.id,value:s.id},b(s.nome),9,De))),128))],40,Ve),[[q,h.value]])])]),e("div",{class:R([{hidden:h.value==0},"flex w-full space-x-6"])},[e("div",Ue,[e("div",Ie,[Ce,e("div",Te,[l(e("input",{type:"text",disabled:"",name:"desc_servico",id:"desc_servico","onUpdate:modelValue":t[6]||(t[6]=s=>S.value.nome=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:leading-6 text-center"},null,512),[[f,S.value.nome]])])]),e("div",qe,[Ee,e("div",Ae,[l(e("input",{type:"text",name:"quantidade",id:"quantidade","onUpdate:modelValue":t[7]||(t[7]=s=>u.value=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center"},null,512),[[f,u.value]])])]),e("div",je,[e("div",Le,[Oe,e("div",$e,[l(e("input",{type:"text",name:"vlr_unit",id:"vlr_unit","onUpdate:modelValue":t[8]||(t[8]=s=>i.value=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center","data-maska":`[
                                    '##.##',
                                    '###.##',
                                    '####.##',
                                    '#####.##'
                                ]`},null,512),[[f,i.value],[x(w)]])])]),e("div",Ne,[Re,e("div",Be,[l(e("input",{type:"text",name:"vlr_desc",id:"vlr_desc","onUpdate:modelValue":t[9]||(t[9]=s=>d.value=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center","data-maska":`[
                                    '##.##',
                                    '###.##',
                                    '####.##',
                                    '#####.##'
                                ]`},null,512),[[f,d.value],[x(w)]])])]),e("div",Qe,[Me,e("div",ze,[l(e("input",{type:"text",disabled:"",name:"vlr_total",id:"vlr_total","onUpdate:modelValue":t[10]||(t[10]=s=>c.value=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset bg-gray-200 ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center","data-maska":`[
                                    '##.##',
                                    '###.##',
                                    '####.##',
                                    '#####.##'
                                ]`},null,512),[[f,c.value],[x(w)]])])]),e("div",Xe,[e("button",{onClick:t[11]||(t[11]=s=>J()),class:"flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500"},"OK")])]),e("div",Ze,[Ge,e("div",He,[l(e("textarea",{name:"detalhes",id:"detalhes",rows:"2",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",disabled:m.value==!1,"onUpdate:modelValue":t[12]||(t[12]=s=>U.value=s)},null,8,Ke),[[f,U.value]])])])])],2),e("div",{class:R([{hidden:p.value.length==0},"w-full max-h-40 flex flex-col overflow-auto"])},[(g(!0),v(E,null,A(p.value,(s,$)=>(g(),v("div",{key:s.id,class:"w-11/12 flex flex-wrap space-x-0 sm:space-x-6 space-y-4 sm:space-y-0 border sm:border-0 border-sky-300 rounded-lg mb-2 sm:mb-4"},[e("div",Je,[We,e("div",Ye,[e("input",{type:"text",disabled:"",name:"desc_servico",id:"desc_servico",value:s.nome,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset bg-gray-200 ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:leading-6 text-center"},null,8,et)])]),e("div",tt,[st,e("div",ot,[e("input",{type:"text",disabled:"",name:"quantidade",id:"quantidade",value:s.quantidade,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset bg-gray-200 ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center"},null,8,at)])]),e("div",nt,[it,e("div",lt,[l(e("input",{type:"text",disabled:"",name:"vlr_total",id:"vlr_total",value:s.vlr_total,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset bg-gray-200 ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center","data-maska":`[
                                '##.##',
                                '###.##',
                                '####.##',
                                '#####.##'
                            ]`},null,8,dt),[[x(w)]])])]),e("div",rt,[e("button",{onClick:Ht=>W($),class:"flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500"},"X",8,ct)])]))),128))],2),e("div",ut,[e("div",mt,[gt,e("div",vt,[e("div",ft,[l(e("select",{id:"uf",name:"uf","onUpdate:modelValue":t[13]||(t[13]=s=>o.formaPgto=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6",disabled:m.value==!1},_t,8,xt),[[q,o.formaPgto]])])])]),e("div",ht,[bt,e("div",wt,[e("div",yt,[l(e("select",{id:"pagamento",name:"pagamento","onUpdate:modelValue":t[14]||(t[14]=s=>o.pgto=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6",disabled:m.value==!1},Ft,8,kt),[[q,o.pgto]])])])]),e("div",Dt,[Ut,e("div",It,[e("div",Ct,[Tt,l(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=s=>o.dtPgto=s),disabled:m.value==!1,class:"h-9 block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 text-xs","data-maska":"##/##/####"},null,8,qt),[[f,o.dtPgto],[x(w)]])])])])]),e("div",Et,[e("div",At,[jt,e("div",Lt,[e("div",Ot,[$t,l(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=s=>te(F)?F.value=s:null),disabled:"",class:"h-9 block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 text-xs"},null,512),[[f,x(F)]])])])]),e("div",Nt,[Rt,e("div",Bt,[e("div",Qt,[e("select",{id:"vendedor",name:"vendedor",onChange:t[17]||(t[17]=s=>H(s.target.value)),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6",disabled:m.value==!1},[zt,(g(!0),v(E,null,A(k.value,s=>(g(),v("option",{key:s.id,value:s.id},b(s.name),9,Xt))),128))],40,Mt)])])])]),e("div",Zt,[e("label",{class:"inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 sm:w-auto",onClick:t[18]||(t[18]=s=>C(3))},"Avançar"),x(M)?(g(),v("label",{key:0,class:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",onClick:t[19]||(t[19]=s=>C(5))},"Reservar sem PI")):se("",!0),e("label",{class:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:t[20]||(t[20]=s=>C(1))},"Voltar")])]))}};export{ss as default};
