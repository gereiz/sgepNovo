import{p as z,j as a,h as ce,s as re,o as i,f as n,a as D,u as U,w as ue,F as _,Z as me,b as e,t as d,k as m,q as w,l as h,n as O,g as A,v as X,x as ve}from"./app-89d79e85.js";import{_ as fe}from"./AuthenticatedLayout-22dacd1f.js";import _e from"./ModalCancelRes-34a29f78.js";import be from"./ModalWpp-7fc539b2.js";import{u as pe}from"./toastr-3c60d543.js";import"./html2pdf.es-29b0429d.js";import{s as he}from"./vue-multiselect.esm-9ab91698.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./toastr.min-966aa21e.js";const xe="/build/assets/spinner-0f1bcd37.png",B=pe();z({cliente:"",campanha:"",observ:""});function we(b,u){if(b=="local")var v="http://localhost:8000/storage/"+u;else var v="/storage/"+u;return v}function ge(b){let u="5533984316850",v="3032 Deluxe",x="";console.log(navigator.userAgentData.mobile),navigator.userAgentData.mobile?x="https://api.whatsapp.com/send?phone="+u+"&text="+v+"%0a"+b:x="https://web.whatsapp.com/send?phone="+u+"&text="+v+"%0a"+b,window.open(x)}const ke={class:"w-full h-screen pt-24 pb-32 mx-2 sm:mx-4"},ye={class:"w-full h-14 flex mb-2"},Ce={class:"w-2/12 h-14 flex items-center"},Pe=e("h1",{class:"text-xl sm:text-4xl font-bold"},"Reservas",-1),De={class:"text-lg sm:text-2xl text-red-400 font-bold ml-2 sm:ml-4"},Be={class:"w-full flex flex-row flex-wrap items-center justify-center mb-20 sm:mb-0"},Re={class:"w-full flex items-center sm:justify-center flex-wrap"},je={class:"w-5/12 sm:w-1/12 flex flex-col me-4 sm:me-6"},$e=e("label",{for:"bi-semana"},"Ano",-1),Se=e("option",{value:"0",selected:""},"Selecione",-1),Ve=["value"],Ee={class:"w-5/12 sm:w-[20%] flex flex-col me-4 sm:me-6"},Te=e("label",{for:"bi-semana"},"Bi-Semana",-1),Ie=["disabled"],Le=e("option",{value:"0",selected:"",disabled:""},"Selecione",-1),Me=["value"],Ue={class:"w-full sm:w-1/12 flex flex-col me-4 sm:me-6"},Oe=e("label",{for:"status"},"Status",-1),Ae=["disabled"],ze=e("option",{value:"0"},"Todos",-1),Ge=e("option",{value:"1"},"Disponível",-1),Ne=e("option",{value:"2"},"Reservado",-1),Fe=[ze,Ge,Ne],We={class:"w-full sm:w-4/12 flex flex-col sm:-mt-4 me-4 sm:me-6"},qe=e("label",{class:"typo__label"},"Identificação",-1),He={class:"w-full flex"},Ze={class:"w-9/12 me-4"},Je={class:"w-2/12"},Ke={class:"w-full flex items-center justify-center flex-wrap"},Qe={class:"w-5/12 sm:w-[15%] flex flex-col me-4 sm:me-6"},Xe=e("label",{for:"cidades"},"Cidades",-1),Ye=["disabled"],es=e("option",{value:"0",selectedd:""},"Todas as Cidades",-1),ss=["value"],ts={class:"w-5/12 sm:w-[13%] flex flex-col me-4 sm:me-6"},as=e("label",{for:"regioes"},"Regiões",-1),ls=["disabled"],os=e("option",{value:"0",selected:""},"Todas as Regiões",-1),is=["value"],ns={class:"w-full sm:w-[20%] flex flex-col me-4 sm:me-6"},ds=e("label",{for:"bairros"},"Bairros",-1),cs=["disabled"],rs=e("option",{value:"0",selected:""},"Todos os Bairros",-1),us=["value"],ms={class:"space-x-4 mt-3.5 mb-2"},vs={class:"dropdown"},fs={key:0,tabindex:"0",class:"w-fit botao flex items-center bg-green-700 hover:bg-green-500 px-2 py-[0.7rem]"},_s=e("p",{id:"envia_lista"},"Enviar Lista",-1),bs={tabindex:"0",class:"w-56 -ml-10 dropdown-content z-[1] menu p-2 shadow bg-base-200 rounded-box mt-4"},ps=e("li",null,[e("label",{for:"modal-wpp"},"Envio por Whatsapp")],-1),hs=e("li",null,[e("a",null,"Envio por Email")],-1),xs={class:"card w-full max-h-[85%] bg-base-100 shadow-xl overflow-auto rounded-md"},ws={class:"card-body pt-1 sm:pt-2"},gs={class:"w-full flex flex-col flex-wrap sm:flex-row justify-center"},ks=["id","onClick"],ys={class:"w-full flex justify-end"},Cs={class:"w-full flex flex-col items-center"},Ps={class:"w-full mb-4 -ml-4"},Ds=["src"],Bs={class:"w-full sm:w-11/12 flex justify-center flex-wrap mb-4"},Rs={class:"w-full flex justify-between sm:justify-between flex-wrap space-y-4"},js={class:"w-full flex flex-wrap justify-between sm:justify-between"},$s={class:"text-xs sm:card-title"},Ss={class:"text-xs sm:card-title"},Vs={class:"w-full flex flex-wrap justify-between sm:justify-between"},Es={class:"text-xs sm:card-title"},Ts={class:"text-xs sm:card-title text-red-500"},Is={class:"w-full flex justify-center flex-wrap space-y-2 mb-4"},Ls=e("button",{class:"w-11/12 sm:w-10/12 botao bg-sky-700 hover:bg-sky-500"},"Detalhes",-1),Ms=["onClick"],Us=["onClick"],Os=e("input",{type:"checkbox",id:"modal-reserva",class:"modal-toggle"},null,-1),As={class:"modal flex items-end md:items-center"},zs={class:"modal-box"},Gs={class:"flex mb-4"},Ns=e("label",{for:"modal-reserva",class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),Fs=e("h3",{class:"font-bold text-lg"},"Reservar Painel:",-1),Ws={class:"font-bold text-lg ml-2 text-red-500"},qs={class:"w-full flex flex-col sm:flex-row flex-wrap space-y-4 sm:space-y-8"},Hs={class:"w-full flex flex-col"},Zs=e("span",{class:"label-text ml-1"},"Bi-semana",-1),Js={name:"",id:"",class:"select select-bordered",disabled:""},Ks=["value"],Qs={class:"w-full sm:w-6/12 flex flex-col me-4"},Xs=e("span",{class:"label-text ml-1"},"Cliente",-1),Ys=["disabled"],et=["value"],st={class:"w-full sm:w-5/12 flex flex-col"},tt=e("span",{class:"label-text ml-1"},"Campanha",-1),at=["disabled"],lt={class:"w-full flex flex-col"},ot=e("span",{class:"label-text ml-1"},"Mensagem",-1),it=["disabled"],nt={class:"w-full flex flex-col"},dt={class:"form-control"},ct={class:"cursor-pointer"},rt=e("span",{class:"label-text text-lg sm:text-xl me-4"},"Existe P. I. para esta reserva?",-1),ut={class:"modal-action"},mt={method:"dialog",class:"modal-box bg-white"},vt=e("h3",{class:"font-black text-2xl text-red-700 animate-pulse duration-200 text-center"},"ATENÇÃO!",-1),ft=e("p",{class:"py-4"},"Ao Marcar que existe uma P. I. para esta reserva não será mais possível alterá-la!",-1),_t=e("p",{class:"py-4"},"Confirme somente se tiver certeza da reserva.",-1),bt={class:"modal-action"},pt={class:"w-full flex justify-center space-x-4"},Bt={__name:"ReservaPaineis",props:["ambiente","reservas","anos","paineis","clientes","bisemanas","cidades","regioes","bairros"],setup(b){const u=b;a(null);const v=a(!0),x=a([]),f=a([]),C=a([]),g=a([]),R=a(u.paineis),G=z([]),N=a(""),j=a(""),L=a(!0),F=a(!0),W=a(!0),q=a(!0),$=a(0),c=a(0),k=a(0),S=a(0),P=a(0),V=a(0),H=a(0),Z=a(0),J=a(0),E=a(""),p=a(!1),K=a(null),T=a(!1),r=z({cliente:"",campanha:"",observ:""}),Y=ce(()=>Object.values(u.bisemanas).filter(t=>t.id===c.value));re(()=>{ie()});function ee(){axios.post("/GetBisemanas",{bisemana:$.value}).then(l=>{H.value=Object.values(l.data),L.value=!1,c.value=0})}function se(){axios.post("/GetRegioes",{idCid:S.value}).then(l=>{Z.value=Object.values(l.data),P.value=0,V.value=0})}function te(){axios.post("/GetBairros",{idReg:P.value}).then(l=>{J.value=Object.values(l.data)})}function I(){c.value===0?B.error("É necessário informar uma Bi-semana"):k.value===0?B.error("É necessário informar um Status"):axios.post("/GetPaineis",{ano:$.value,bisemana:c.value,statusPainel:k.value,cidade:S.value,regiao:P.value,bairro:V.value}).then(l=>{R.value=l.data,j.value=k.value})}function ae(l){I()}function Q(l){E.value=l,N.value=u.clientes,c.value===0&&setTimeout(()=>{B.error("É necessário infrmar a Bi-semana Primeiro")},500)}function le(l,t,s,o){const y=x.value[l];y.classList,Object.values(f.value).includes(t)?(f.value.splice(f.value.indexOf(t),1),C.value.splice(C.value.indexOf(o),1),g.value.splice(f.value.indexOf(s),1),y.checked=!1):(f.value.push(t),C.value.push(o),g.value.push(s),y.checked=!0),f.value.length===0&&(C.value=[],g.value=[])}function M(){f.value=[],g.value=[],C.value=[],x.value.forEach(t=>{t.checked=!1})}function oe(){if(p.value){let l=K.value;T.value=!0,l.showModal()}}function ie(){R.value.forEach(l=>{G.push(l.identificacao)})}function ne(l){axios.post("/ReservaPainel",{clienteId:r.cliente,outdoorId:l,bsId:c.value,campanha:r.campanha,obs:r.observ,checkPi:p.value}).then(t=>{t.data.cod===0?B.error(t.data.msg):t.data.cod==1&&(B.success(t.data.msg),r.cliente="",r.campanha="",r.observ="",p.value=!1,setTimeout(()=>{I()},500))})}function de(l){let t=document.getElementById("envia_lista");v.value=!1,axios.post("/setData",{numBs:c.value,idPaineis:g.value}).then(s=>{t.innerHTML="Carregando...",setTimeout(()=>{axios.post("/relDisponiveis",{tpEnvio:l}).then(o=>{console.log("Relatório gerado"),console.log(o.data),l=="wpp"?ge(o.data):l=="pdf"&&window.open("/relDisponiveis","_blank"),t.innerHTML="Enviar Lista",v.value=!0}).catch(o=>{console.log("Relatório não gerado")})},2e3)}).catch(s=>{console.log("Dados não Enviados")})}return(l,t)=>(i(),n(_,null,[D(U(me),{title:"Reservas"}),D(fe,null,{default:ue(()=>[e("div",ke,[e("div",ye,[e("div",Ce,[Pe,e("h1",De,d(R.value.length),1)])]),e("div",Be,[e("div",Re,[e("div",je,[$e,m(e("select",{class:"select-paineis",name:"ano",id:"ano","onUpdate:modelValue":t[0]||(t[0]=s=>$.value=s),onChange:t[1]||(t[1]=s=>ee())},[Se,(i(!0),n(_,null,h(b.anos,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.ano_bisemana),9,Ve))),128))],544),[[w,$.value]])]),e("div",Ee,[Te,m(e("select",{class:"select-paineis",name:"bi-semana",id:"bi-semama","onUpdate:modelValue":t[2]||(t[2]=s=>c.value=s),disabled:L.value,onChange:t[3]||(t[3]=s=>(k.value=0,F.value=!1))},[Le,(i(!0),n(_,null,h(H.value,(s,o)=>(i(),n("option",{key:o,value:s.id},"BS: "+d(s.num_bisemana)+" "+d(new Date(s.inicio).toLocaleDateString())+" até "+d(new Date(s.fim).toLocaleDateString()),9,Me))),128))],40,Ie),[[w,c.value]])]),e("div",Ue,[Oe,m(e("select",{class:"select-paineis",name:"status",id:"status",disabled:F.value,"onUpdate:modelValue":t[4]||(t[4]=s=>k.value=s),onChange:t[5]||(t[5]=s=>(I(),M()))},Fe,40,Ae),[[w,k.value]])]),e("div",We,[qe,e("div",He,[e("div",Ze,[D(U(he),{disabled:"",modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=s=>f.value=s),options:G,multiple:!0,searchable:!0,"close-on-select":!1,"show-labels":!1,placeholder:"Todos"},null,8,["modelValue","options"])]),e("div",Je,[e("button",{onClick:t[7]||(t[7]=s=>M()),class:"botao max-h-10 bg-red-700 hover:bg-red-500"},"Limpar")])])])]),e("div",Ke,[e("div",Qe,[Xe,m(e("select",{class:"select-paineis",name:"cidades",id:"cidades",disabled:L.value,"onUpdate:modelValue":t[8]||(t[8]=s=>S.value=s),onChange:t[9]||(t[9]=s=>(W.value=!1,se()))},[es,(i(!0),n(_,null,h(b.cidades,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,ss))),128))],40,Ye),[[w,S.value]])]),e("div",ts,[as,m(e("select",{class:"select-paineis",name:"regioes",id:"regioes",disabled:W.value,"onUpdate:modelValue":t[10]||(t[10]=s=>P.value=s),onChange:t[11]||(t[11]=s=>(q.value=!1,te()))},[os,(i(!0),n(_,null,h(Z.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,is))),128))],40,ls),[[w,P.value]])]),e("div",ns,[ds,m(e("select",{class:"select-paineis",name:"bairros",id:"bairros",disabled:q.value,"onUpdate:modelValue":t[12]||(t[12]=s=>V.value=s)},[rs,(i(!0),n(_,null,h(J.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,us))),128))],8,cs),[[w,V.value]])]),e("div",ms,[e("button",{class:"botao bg-sky-700 hover:bg-sky-500",onClick:t[13]||(t[13]=s=>(I(),M()))}," Filtrar "),e("div",vs,[g.value.length>0&&j.value==1?(i(),n("label",fs,[e("img",{src:xe,class:O(["w-4 h-4 me-2 animate-spin",{hidden:v.value}]),alt:"spinner"},null,2),_s])):A("",!0),e("ul",bs,[ps,hs,e("li",null,[e("label",{onClick:t[14]||(t[14]=s=>de("pdf"))},"Download do Relatório")])])])])])]),e("div",xs,[e("div",ws,[e("div",gs,[(i(!0),n(_,null,h(R.value,(s,o)=>(i(),n("div",{key:o,class:"card w-full sm:w-5/12 bg-base-100 border-2 rounded-md shadow-xl mt-4 sm:mr-4"},[e("div",{class:"card-body",id:o,onClick:y=>le(o,s.identificacao,s.id,s)},[e("div",ys,[e("input",{type:"checkbox",ref_for:!0,ref_key:"itemRefs",ref:x,class:"w-14 h-14 border-0 checkbox checkbox-success"},null,512)]),e("div",Cs,[e("div",Ps,[e("img",{class:"img-painel",src:U(we)(u.ambiente,s.image_url),alt:"Bairro"},null,8,Ds)]),e("div",Bs,[e("div",Rs,[e("div",js,[e("h2",$s,d(s.cnome),1),e("h2",Ss,"Região: "+d(s.rnome),1)]),e("div",Vs,[e("h2",Es,"Bairro: "+d(s.bnome),1),e("h2",Ts,"Identificação.: "+d(s.identificacao),1)])])])])],8,ks),e("div",Is,[Ls,j.value==1?(i(),n("label",{key:0,for:"modal-reserva",class:"w-11/12 sm:w-10/12 h-10 botao-modal bg-green-700 hover:bg-green-500",onClick:y=>Q(s)}," Reservar ",8,Ms)):A("",!0),j.value==2?(i(),n("label",{key:1,onClick:y=>Q(s),for:"modal-canc-reserva",class:"w-11/12 sm:w-10/12 h-10 botao-modal bg-red-700 hover:bg-red-500"}," Cancelar ",8,Us)):A("",!0)])]))),128))])])]),Os,e("div",As,[e("div",zs,[e("div",Gs,[Ns,Fs,e("h3",Ws,"Identificação "+d(E.value.identificacao),1)]),e("form",null,[e("div",qs,[e("div",Hs,[Zs,e("select",Js,[(i(!0),n(_,null,h(Y.value,(s,o)=>(i(),n("option",{key:o,value:s.id},"BS: "+d(s.num_bisemana)+" "+d(new Date(s.inicio).toLocaleDateString())+" até "+d(new Date(s.fim).toLocaleDateString()),9,Ks))),128))])]),e("div",Qs,[Xs,m(e("select",{"onUpdate:modelValue":t[15]||(t[15]=s=>r.cliente=s),name:"",id:"",class:"select select-bordered",disabled:c.value==0},[(i(!0),n(_,null,h(N.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome_fantasia?s.nome_fantasia:s.razao_social),9,et))),128))],8,Ys),[[w,r.cliente]])]),e("div",st,[tt,m(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>r.campanha=s),type:"text",name:"",id:"",class:"input input-bordered",disabled:c.value==0},null,8,at),[[X,r.campanha]])]),e("div",lt,[ot,m(e("textarea",{"onUpdate:modelValue":t[17]||(t[17]=s=>r.observ=s),name:"",id:"",class:"textarea textarea-bordered textarea-lg",disabled:c.value==0},null,8,it),[[X,r.observ]])]),e("div",nt,[e("div",dt,[e("label",ct,[rt,m(e("input",{type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=s=>p.value=s),onClick:t[19]||(t[19]=s=>(p.value=!p.value,oe())),class:"checkbox checkbox-lg checkbox-success border-2 border-gray-400"},null,512),[[ve,p.value]])])])])]),e("div",ut,[e("label",{for:"modal-reserva",class:O(["w-full botao-modal",{"bg-slate-400":c.value==0,"hover:bg-slate-400":c.value==0}]),onClick:t[20]||(t[20]=s=>ne(E.value.id))},"Reservar",2)])]),e("dialog",{id:"modal_confirm",ref_key:"confPi",ref:K,class:O(["bg-transparent flex justify-center",{hidden:!T.value}])},[e("form",mt,[vt,ft,_t,e("div",bt,[e("div",pt,[e("button",{class:"w-5/12 botao-primario",onClick:t[21]||(t[21]=s=>T.value=!1)},"Confirmar"),e("button",{onClick:t[22]||(t[22]=s=>(p.value=!1,T.value=!1)),class:"w-5/12 botao-danger"},"Ainda não !")])])])],2)])]),D(be),D(_e,{painel:E.value,bisemana:c.value,onAtualizaPage:ae},null,8,["painel","bisemana"])])]),_:1})],64))}};export{Bt as default};
