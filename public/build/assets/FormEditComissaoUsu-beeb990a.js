import{j as i,k as D,o as d,f as c,b as e,m as l,y,F as S,p as C,v,u as V,n as I,a as $,t as L,g as M}from"./app-b59ccc57.js";import{U as j}from"./maska-82a16b27.js";import{u as N}from"./toastr-0012676b.js";import"./functions-f3a208ff.js";import H from"./DelComissaoUsu-09ba1261.js";import"./toastr-0e92b8d6.js";import"./ClipboardDocumentCheckIcon-25d34672.js";import"./transition-513be258.js";const z={class:"w-full flex flex-col items-center justify-center space-y-8"},A={class:"w-full h-14 flex flex-col sm:flex-row mb-2 space-y-4 items-center justify-center"},G={class:"w-full sm:w-4/12 flex justify-center items-center space-x-2 mt-8 font-extrabold"},P=e("label",{for:"",class:"block text-lg font-medium leading-6 text-gray-900"},"Serviço:",-1),R=e("option",{value:"0",disabled:""},"Selecione um Serviço",-1),q=["value"],J={class:"w-10/12 sm:w-2/12"},K=e("label",{for:"desc_servico",class:"block text-sm font-medium leading-6 text-gray-900"},"Serviço",-1),O={class:"mt-2"},Q={class:"w-10/12 sm:w-1/12"},W=e("label",{for:"valor_comissao",class:"block text-sm font-medium leading-6 text-gray-900"},"Valor",-1),X={class:"mt-2"},Y={class:"w-10/12 sm:w-2/12"},Z=e("label",{for:"tipo_comissao",class:"block text-sm font-medium leading-6 text-gray-900"},"Tipo:",-1),ee={class:"mt-2"},se=e("option",{value:"",disabled:""},"Selecione o tipo",-1),oe=e("option",{value:"0"},"Valor",-1),te=e("option",{value:"1"},"Porcentagem",-1),ie=[se,oe,te],ne={key:0,class:"w-11/12 flex flex-wrap justify-center space-x-0 sm:space-x-6 space-y-4 sm:space-y-0 border sm:border-0 border-sky-300 rounded-lg mb-2 sm:mb-0"},ae={class:"w-10/12 sm:w-2/12"},le=e("label",{for:"desc_servico",class:"block text-sm font-medium leading-6 text-red-500"},"Serviço",-1),re={class:"mt-2"},de=["onUpdate:modelValue"],ce={class:"w-10/12 sm:w-1/12"},me=e("label",{for:"valor_comissao",class:"block text-sm font-medium leading-6 text-red-500"},"Valor",-1),ue={class:"mt-2"},ge=["onUpdate:modelValue"],ve={class:"w-10/12 sm:w-[10%]"},fe=e("label",{for:"tipo_comissao",class:"block text-sm font-medium leading-6 text-red-500"},"Tipo:",-1),_e={class:"mt-2"},pe=["onUpdate:modelValue"],xe=e("option",{value:"",disabled:""},"Selecione o tipo",-1),ye=e("option",{value:"0"},"BRL",-1),be=e("option",{value:"1"},"%",-1),we=[xe,ye,be],he={class:"w-10/12 sm:w-3/12 flex justify-center sm:justify-start sm:pt-7 py-2 sm:py-0"},ke=["onClick"],Se={class:"mt-5 sm:mt-6 w-full space-y-4 border-t border-gray-200 pt-4 sm:space-x-8"},De={__name:"FormEditComissaoUsu",props:["usuario","servicos","comissoes"],emits:["closeEdit","sendFormComissao"],setup(f,{emit:b}){const U=f,_=N(),g=i(0),p=i(""),w=i(""),E=i(""),m=i(U.usuario.id),u=i(0),n=i(""),a=i(""),x=i(!1);function B(t){b("closeEdit",t)}const h=i({id_funcionario:m.value,id_servico:u.value,valor_comissao:n.value,tipo_comissao:a.value});D([E,m,u,n,a],t=>{h.value={id_funcionario:m.value,id_servico:u.value,valor_comissao:n.value,tipo_comissao:a.value}});function F(t){axios.post("/GetServico",{id_servico:t}).then(o=>{u.value=o.data.id,p.value=o.data}).catch(o=>{_.error(res.data.message)})}function k(){if(n.value==""&&(_.error("Informe o valor da comissão"),document.getElementById("valor_comissao").focus()),a.value==""&&(_.error("Informe o tipo da comissão"),document.getElementById("tipo_comissao").focus()),m.value!=0&&u.value!=0&&n.value!=""&&a.value!=""){b("sendFormComissao",h.value);let t=document.getElementById("btnSendServ");t.innerHTML="Carregando...",setTimeout(()=>{t.innerHTML="Salvar"},1e3)}}function T(t,o){t==="t"?(w.value=o,x.value=!0):(x.value=!1,window.location.reload())}return(t,o)=>(d(),c("div",z,[e("div",A,[e("div",G,[P,l(e("select",{"onUpdate:modelValue":o[0]||(o[0]=s=>g.value=s),onChange:o[1]||(o[1]=s=>F(g.value)),class:"block w-8/12 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"},[R,(d(!0),c(S,null,C(f.servicos,s=>(d(),c("option",{key:s.id,value:s.id},L(s.nome),9,q))),128))],544),[[y,g.value]])])]),e("div",{class:I([{hidden:g.value==0},"w-11/12 flex flex-wrap justify-center space-x-0 sm:space-x-6 space-y-4 sm:space-y-0 border sm:border-0 border-sky-300 rounded-lg py-4 mb-2 sm:mb-0"])},[e("div",J,[K,e("div",O,[l(e("input",{type:"text",disabled:"",name:"desc_servico",id:"desc_servico","onUpdate:modelValue":o[2]||(o[2]=s=>p.value.nome=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset font-bold ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-base sm:leading-6 text-center"},null,512),[[v,p.value.nome]])])]),e("div",Q,[W,e("div",X,[l(e("input",{type:"text",name:"valor_comissao",id:"valor_comissao","onUpdate:modelValue":o[3]||(o[3]=s=>n.value=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center","data-maska":`[\r
                            '##,##',\r
                            '###,##',\r
                            '####,##',\r
                            '#####,##'\r
                        ]`},null,512),[[v,n.value],[V(j)]])])]),e("div",Y,[Z,e("div",ee,[l(e("select",{name:"tipo_comissao",id:"tipo_comissao","onUpdate:modelValue":o[4]||(o[4]=s=>a.value=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"},ie,512),[[y,a.value]])])])],2),(d(!0),c(S,null,C(f.comissoes,s=>(d(),c("div",{key:s.id,class:"w-10/12 flex items-center justify-around"},[s.id_funcionario===m.value?(d(),c("div",ne,[e("div",ae,[le,e("div",re,[l(e("input",{type:"text",disabled:"",name:"desc_servico",id:"desc_servico","onUpdate:modelValue":r=>s.servico.nome=r,class:"block w-full rounded-md border-0 py-1.5 text-gray-400 shadow-sm ring-1 ring-inset font-bold ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-base sm:leading-6 text-center"},null,8,de),[[v,s.servico.nome]])])]),e("div",ce,[me,e("div",ue,[l(e("input",{type:"text",disabled:"",name:"valor_comissao",id:"valor_comissao","onUpdate:modelValue":r=>s.valor=r,class:"block w-full rounded-md border-0 py-1.5 text-gray-400 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center","data-maska":`[\r
                                '##,##',\r
                                '###,##',\r
                                '####,##',\r
                                '#####,##'\r
                            ]`},null,8,ge),[[v,s.valor],[V(j)]])])]),e("div",ve,[fe,e("div",_e,[l(e("select",{name:"tipo_comissao",id:"tipo_comissao","onUpdate:modelValue":r=>s.tipo_comissao=r,disabled:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm text-center sm:leading-6"},we,8,pe),[[y,s.tipo_comissao]])])]),e("div",he,[e("label",{id:"btnSendServ",class:"inline-flex w-10/12 justify-center rounded-md bg-red-600 px-3 py-[0.6rem] text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3",onClick:r=>T("t",s)},"Excluir Comissão",8,ke)])])):M("",!0)]))),128)),$(H,{comissao:w.value,openDel:x.value,onSendFormComissao:k},null,8,["comissao","openDel"]),e("div",Se,[e("label",{id:"btnSendServ",class:"inline-flex w-10/12 justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 sm:w-5/12",onClick:o[5]||(o[5]=s=>k())},"Salvar"),e("label",{class:"mt-3 inline-flex w-10/12 justify-center rounded-md bg-gray-200 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-5/12",onClick:o[6]||(o[6]=s=>B("f"))},"Cancelar")])]))}};export{De as default};
