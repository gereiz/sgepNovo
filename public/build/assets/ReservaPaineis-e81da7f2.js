import{j as l,p as ee,h as re,s as ue,o as i,f as n,a as y,u as M,w as me,F as v,Z as ve,b as e,t as d,k as u,q as b,l as _,n as O,g as z,v as se,x as fe}from"./app-49204380.js";import{_ as _e}from"./AuthenticatedLayout-49727a8a.js";import be from"./ModalCancelRes-ae8b4aab.js";import{g as pe,_ as he,t as C}from"./ModalWpp-7616295c.js";import{s as xe}from"./vue-multiselect.esm-a54103ae.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./toastr-f8bd3783.js";import"./toastr.min-91c0535c.js";import"./html2pdf.es-cadba2b0.js";const we="/build/assets/spinner-0f1bcd37.png",ge={class:"w-full h-screen pt-24 pb-32 mx-2 sm:mx-4"},ke={class:"w-full h-14 flex mb-2"},ye={class:"w-2/12 h-14 flex items-center"},Ce=e("h1",{class:"text-xl sm:text-4xl font-bold"},"Reservas",-1),Pe={class:"text-lg sm:text-2xl text-red-400 font-bold ml-2 sm:ml-4"},Re={class:"w-full flex flex-row flex-wrap items-center justify-center mb-20 sm:mb-0"},Be={class:"w-full flex items-center sm:justify-center flex-wrap"},De={class:"w-5/12 sm:w-1/12 flex flex-col me-4 sm:me-6"},je=e("label",{for:"bi-semana"},"Ano",-1),$e=e("option",{value:"0",selected:""},"Selecione",-1),Se=["value"],Ve={class:"w-5/12 sm:w-[20%] flex flex-col me-4 sm:me-6"},Ee=e("label",{for:"bi-semana"},"Bi-Semana",-1),Te=["disabled"],Ie=e("option",{value:"0",selected:"",disabled:""},"Selecione",-1),Le=["value"],Ue={class:"w-full sm:w-1/12 flex flex-col me-4 sm:me-6"},Me=e("label",{for:"status"},"Status",-1),Oe=["disabled"],ze=e("option",{value:"0"},"Todos",-1),Ae=e("option",{value:"1"},"Disponível",-1),Ge=e("option",{value:"2"},"Reservado",-1),Ne=[ze,Ae,Ge],Fe={class:"w-full sm:w-4/12 flex flex-col sm:-mt-4 me-4 sm:me-6"},qe=e("label",{class:"typo__label"},"Identificação",-1),He={class:"w-full flex"},We={class:"w-9/12 me-4"},Ze={class:"w-2/12"},Je={class:"w-full flex items-center justify-center flex-wrap"},Ke={class:"w-5/12 sm:w-[15%] flex flex-col me-4 sm:me-6"},Qe=e("label",{for:"cidades"},"Cidades",-1),Xe=["disabled"],Ye=e("option",{value:"0",selectedd:""},"Todas as Cidades",-1),es=["value"],ss={class:"w-5/12 sm:w-[13%] flex flex-col me-4 sm:me-6"},as=e("label",{for:"regioes"},"Regiões",-1),ls=["disabled"],ts=e("option",{value:"0",selected:""},"Todas as Regiões",-1),os=["value"],is={class:"w-full sm:w-[20%] flex flex-col me-4 sm:me-6"},ns=e("label",{for:"bairros"},"Bairros",-1),ds=["disabled"],cs=e("option",{value:"0",selected:""},"Todos os Bairros",-1),rs=["value"],us={class:"space-x-4 mt-3.5 mb-2"},ms={class:"dropdown"},vs={key:0,tabindex:"0",class:"w-fit botao flex items-center bg-green-700 hover:bg-green-500 px-2 py-[0.7rem]"},fs=e("p",{id:"envia_lista"},"Enviar Lista",-1),_s={tabindex:"0",class:"w-56 -ml-10 dropdown-content z-[1] menu p-2 shadow bg-base-200 rounded-box mt-4"},bs=e("li",null,[e("a",null,"Envio por Email")],-1),ps={class:"card w-full max-h-[85%] bg-base-100 shadow-xl overflow-auto rounded-md"},hs={class:"card-body pt-1 sm:pt-2"},xs={class:"w-full flex flex-col flex-wrap sm:flex-row justify-center"},ws=["id","onClick"],gs={class:"w-full flex justify-end"},ks={class:"w-full flex flex-col items-center"},ys={class:"w-full mb-4 -ml-4"},Cs=["src"],Ps={class:"w-full sm:w-11/12 flex justify-center flex-wrap mb-4"},Rs={class:"w-full flex justify-between sm:justify-between flex-wrap space-y-4"},Bs={class:"w-full flex flex-wrap justify-between sm:justify-between"},Ds={class:"text-xs sm:card-title"},js={class:"text-xs sm:card-title"},$s={class:"w-full flex flex-wrap justify-between sm:justify-between"},Ss={class:"text-xs sm:card-title"},Vs={class:"text-xs sm:card-title text-red-500"},Es={class:"w-full flex justify-center flex-wrap space-y-2 mb-4"},Ts=e("button",{class:"w-11/12 sm:w-10/12 botao bg-sky-700 hover:bg-sky-500"},"Detalhes",-1),Is=["onClick"],Ls=["onClick"],Us=e("input",{type:"checkbox",id:"modal-reserva",class:"modal-toggle"},null,-1),Ms={class:"modal flex items-end md:items-center"},Os={class:"modal-box"},zs={class:"flex mb-4"},As=e("label",{for:"modal-reserva",class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),Gs=e("h3",{class:"font-bold text-lg"},"Reservar Painel:",-1),Ns={class:"font-bold text-lg ml-2 text-red-500"},Fs={class:"w-full flex flex-col sm:flex-row flex-wrap space-y-4 sm:space-y-8"},qs={class:"w-full flex flex-col"},Hs=e("span",{class:"label-text ml-1"},"Bi-semana",-1),Ws={name:"",id:"",class:"select select-bordered",disabled:""},Zs=["value"],Js={class:"w-full sm:w-6/12 flex flex-col me-4"},Ks=e("span",{class:"label-text ml-1"},"Cliente",-1),Qs=["disabled"],Xs=["value"],Ys={class:"w-full sm:w-5/12 flex flex-col"},ea=e("span",{class:"label-text ml-1"},"Campanha",-1),sa=["disabled"],aa={class:"w-full flex flex-col"},la=e("span",{class:"label-text ml-1"},"Mensagem",-1),ta=["disabled"],oa={class:"w-full flex flex-col"},ia={class:"form-control"},na={class:"cursor-pointer"},da=e("span",{class:"label-text text-lg sm:text-xl me-4"},"Existe P. I. para esta reserva?",-1),ca={class:"modal-action"},ra={method:"dialog",class:"modal-box bg-white"},ua=e("h3",{class:"font-black text-2xl text-red-700 animate-pulse duration-200 text-center"},"ATENÇÃO!",-1),ma=e("p",{class:"py-4"},"Ao Marcar que existe uma P. I. para esta reserva não será mais possível alterá-la!",-1),va=e("p",{class:"py-4"},"Confirme somente se tiver certeza da reserva.",-1),fa={class:"modal-action"},_a={class:"w-full flex justify-center space-x-4"},Pa={__name:"ReservaPaineis",props:["ambiente","reservas","anos","paineis","clientes","bisemanas","cidades","regioes","bairros","whatsapp"],setup(E){const p=E;l(null);const T=l(!0),A=l(""),I=l([]),m=l([]),g=l([]),h=l([]),P=l(p.paineis),G=ee([]),N=l(""),R=l(""),L=l(!0),F=l(!0),q=l(!0),H=l(!0),B=l(0),c=l(0),x=l(0),D=l(0),k=l(0),j=l(0),W=l(0),Z=l(0),J=l(0),$=l(""),f=l(!1),K=l(null),S=l(!1),r=ee({cliente:"",campanha:"",observ:""}),Q=re(()=>Object.values(p.bisemanas).filter(a=>a.id===c.value));ue(()=>{de()});function ae(){axios.post("/GetBisemanas",{bisemana:B.value}).then(t=>{W.value=Object.values(t.data),L.value=!1,c.value=0})}function le(){axios.post("/GetRegioes",{idCid:D.value}).then(t=>{Z.value=Object.values(t.data),k.value=0,j.value=0})}function te(){axios.post("/GetBairros",{idReg:k.value}).then(t=>{J.value=Object.values(t.data)})}function V(){c.value===0?C.error("É necessário informar uma Bi-semana"):x.value===0?C.error("É necessário informar um Status"):axios.post("/GetPaineis",{ano:B.value,bisemana:c.value,statusPainel:x.value,cidade:D.value,regiao:k.value,bairro:j.value}).then(t=>{P.value=t.data,R.value=x.value})}function oe(t){V()}function X(t){$.value=t,N.value=p.clientes,c.value===0&&setTimeout(()=>{C.error("É necessário infrmar a Bi-semana Primeiro")},500)}function ie(t,a,s,o){const w=I.value[t];w.classList,Object.values(m.value).includes(a)?(m.value.splice(m.value.indexOf(a),1),g.value.splice(g.value.indexOf(o),1),h.value.splice(m.value.indexOf(s),1),w.checked=!1):(m.value.push(a),g.value.push(o),h.value.push(s),w.checked=!0),m.value.length===0&&(g.value=[],h.value=[])}function U(){m.value=[],h.value=[],g.value=[],I.value.forEach(a=>{a.checked=!1})}function ne(){if(f.value){let t=K.value;S.value=!0,t.showModal()}}function de(){P.value.forEach(t=>{G.push(t.identificacao)})}function ce(t){axios.post("/ReservaPainel",{clienteId:r.cliente,outdoorId:t,bsId:c.value,campanha:r.campanha,obs:r.observ,checkPi:f.value}).then(a=>{a.data.cod===0?C.error(a.data.msg):a.data.cod==1&&(C.success(a.data.msg),r.cliente="",r.campanha="",r.observ="",f.value=!1,setTimeout(()=>{V()},500))})}function Y(t){let a=document.getElementById("envia_lista");T.value=!1,axios.post("/setData",{numBs:c.value,idPaineis:h.value}).then(s=>{a.innerHTML="Carregando...",setTimeout(()=>{axios.post("/relDisponiveis",{tpEnvio:t}).then(o=>{console.log("Relatório gerado"),console.log(o.data),t=="wpp"?A.value=o.data:t=="pdf"&&window.open("/relDisponiveis","_blank"),a.innerHTML="Enviar Lista",T.value=!0}).catch(o=>{console.log("Relatório não gerado")})},2e3)}).catch(s=>{console.log("Dados não Enviados")})}return(t,a)=>(i(),n(v,null,[y(M(ve),{title:"Reservas"}),y(_e,null,{default:me(()=>[e("div",ge,[e("div",ke,[e("div",ye,[Ce,e("h1",Pe,d(P.value.length),1)])]),e("div",Re,[e("div",Be,[e("div",De,[je,u(e("select",{class:"select-paineis",name:"ano",id:"ano","onUpdate:modelValue":a[0]||(a[0]=s=>B.value=s),onChange:a[1]||(a[1]=s=>ae())},[$e,(i(!0),n(v,null,_(E.anos,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.ano_bisemana),9,Se))),128))],544),[[b,B.value]])]),e("div",Ve,[Ee,u(e("select",{class:"select-paineis",name:"bi-semana",id:"bi-semama","onUpdate:modelValue":a[2]||(a[2]=s=>c.value=s),disabled:L.value,onChange:a[3]||(a[3]=s=>(x.value=0,F.value=!1))},[Ie,(i(!0),n(v,null,_(W.value,(s,o)=>(i(),n("option",{key:o,value:s.id},"BS: "+d(s.num_bisemana)+" "+d(new Date(s.inicio).toLocaleDateString())+" até "+d(new Date(s.fim).toLocaleDateString()),9,Le))),128))],40,Te),[[b,c.value]])]),e("div",Ue,[Me,u(e("select",{class:"select-paineis",name:"status",id:"status",disabled:F.value,"onUpdate:modelValue":a[4]||(a[4]=s=>x.value=s),onChange:a[5]||(a[5]=s=>(V(),U()))},Ne,40,Oe),[[b,x.value]])]),e("div",Fe,[qe,e("div",He,[e("div",We,[y(M(xe),{disabled:"",modelValue:m.value,"onUpdate:modelValue":a[6]||(a[6]=s=>m.value=s),options:G,multiple:!0,searchable:!0,"close-on-select":!1,"show-labels":!1,placeholder:"Todos"},null,8,["modelValue","options"])]),e("div",Ze,[e("button",{onClick:a[7]||(a[7]=s=>U()),class:"botao max-h-10 bg-red-700 hover:bg-red-500"},"Limpar")])])])]),e("div",Je,[e("div",Ke,[Qe,u(e("select",{class:"select-paineis",name:"cidades",id:"cidades",disabled:L.value,"onUpdate:modelValue":a[8]||(a[8]=s=>D.value=s),onChange:a[9]||(a[9]=s=>(q.value=!1,le()))},[Ye,(i(!0),n(v,null,_(E.cidades,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,es))),128))],40,Xe),[[b,D.value]])]),e("div",ss,[as,u(e("select",{class:"select-paineis",name:"regioes",id:"regioes",disabled:q.value,"onUpdate:modelValue":a[10]||(a[10]=s=>k.value=s),onChange:a[11]||(a[11]=s=>(H.value=!1,te()))},[ts,(i(!0),n(v,null,_(Z.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,os))),128))],40,ls),[[b,k.value]])]),e("div",is,[ns,u(e("select",{class:"select-paineis",name:"bairros",id:"bairros",disabled:H.value,"onUpdate:modelValue":a[12]||(a[12]=s=>j.value=s)},[cs,(i(!0),n(v,null,_(J.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,rs))),128))],8,ds),[[b,j.value]])]),e("div",us,[e("button",{class:"botao bg-sky-700 hover:bg-sky-500",onClick:a[13]||(a[13]=s=>(V(),U()))}," Filtrar "),e("div",ms,[h.value.length>0&&R.value==1?(i(),n("label",vs,[e("img",{src:we,class:O(["w-4 h-4 me-2 animate-spin",{hidden:T.value}]),alt:"spinner"},null,2),fs])):z("",!0),e("ul",_s,[e("li",null,[e("label",{onClick:a[14]||(a[14]=s=>Y("wpp")),for:"modal-wpp"},"Envio por Whatsapp")]),bs,e("li",null,[e("label",{onClick:a[15]||(a[15]=s=>Y("pdf"))},"Download do Relatório")])])])])])]),e("div",ps,[e("div",hs,[e("div",xs,[(i(!0),n(v,null,_(P.value,(s,o)=>(i(),n("div",{key:o,class:"card w-full sm:w-5/12 bg-base-100 border-2 rounded-md shadow-xl mt-4 sm:mr-4"},[e("div",{class:"card-body",id:o,onClick:w=>ie(o,s.identificacao,s.id,s)},[e("div",gs,[e("input",{type:"checkbox",ref_for:!0,ref_key:"itemRefs",ref:I,class:"w-14 h-14 border-0 checkbox checkbox-success"},null,512)]),e("div",ks,[e("div",ys,[e("img",{class:"img-painel",src:M(pe)(p.ambiente,s.image_url),alt:"Bairro"},null,8,Cs)]),e("div",Ps,[e("div",Rs,[e("div",Bs,[e("h2",Ds,d(s.cnome),1),e("h2",js,"Região: "+d(s.rnome),1)]),e("div",$s,[e("h2",Ss,"Bairro: "+d(s.bnome),1),e("h2",Vs,"Identificação.: "+d(s.identificacao),1)])])])])],8,ws),e("div",Es,[Ts,R.value==1?(i(),n("label",{key:0,for:"modal-reserva",class:"w-11/12 sm:w-10/12 h-10 botao-modal bg-green-700 hover:bg-green-500",onClick:w=>X(s)}," Reservar ",8,Is)):z("",!0),R.value==2?(i(),n("label",{key:1,onClick:w=>X(s),for:"modal-canc-reserva",class:"w-11/12 sm:w-10/12 h-10 botao-modal bg-red-700 hover:bg-red-500"}," Cancelar ",8,Ls)):z("",!0)])]))),128))])])]),Us,e("div",Ms,[e("div",Os,[e("div",zs,[As,Gs,e("h3",Ns,"Identificação "+d($.value.identificacao),1)]),e("form",null,[e("div",Fs,[e("div",qs,[Hs,e("select",Ws,[(i(!0),n(v,null,_(Q.value,(s,o)=>(i(),n("option",{key:o,value:s.id},"BS: "+d(s.num_bisemana)+" "+d(new Date(s.inicio).toLocaleDateString())+" até "+d(new Date(s.fim).toLocaleDateString()),9,Zs))),128))])]),e("div",Js,[Ks,u(e("select",{"onUpdate:modelValue":a[16]||(a[16]=s=>r.cliente=s),name:"",id:"",class:"select select-bordered",disabled:c.value==0},[(i(!0),n(v,null,_(N.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome_fantasia?s.nome_fantasia:s.razao_social),9,Xs))),128))],8,Qs),[[b,r.cliente]])]),e("div",Ys,[ea,u(e("input",{"onUpdate:modelValue":a[17]||(a[17]=s=>r.campanha=s),type:"text",name:"",id:"",class:"input input-bordered",disabled:c.value==0},null,8,sa),[[se,r.campanha]])]),e("div",aa,[la,u(e("textarea",{"onUpdate:modelValue":a[18]||(a[18]=s=>r.observ=s),name:"",id:"",class:"textarea textarea-bordered textarea-lg",disabled:c.value==0},null,8,ta),[[se,r.observ]])]),e("div",oa,[e("div",ia,[e("label",na,[da,u(e("input",{type:"checkbox","onUpdate:modelValue":a[19]||(a[19]=s=>f.value=s),onClick:a[20]||(a[20]=s=>(f.value=!f.value,ne())),class:"checkbox checkbox-lg checkbox-success border-2 border-gray-400"},null,512),[[fe,f.value]])])])])]),e("div",ca,[e("label",{for:"modal-reserva",class:O(["w-full botao-modal",{"bg-slate-400":c.value==0,"hover:bg-slate-400":c.value==0}]),onClick:a[21]||(a[21]=s=>ce($.value.id))},"Reservar",2)])]),e("dialog",{id:"modal_confirm",ref_key:"confPi",ref:K,class:O(["bg-transparent flex justify-center",{hidden:!S.value}])},[e("form",ra,[ua,ma,va,e("div",fa,[e("div",_a,[e("button",{class:"w-5/12 botao-primario",onClick:a[22]||(a[22]=s=>S.value=!1)},"Confirmar"),e("button",{onClick:a[23]||(a[23]=s=>(f.value=!1,S.value=!1)),class:"w-5/12 botao-danger"},"Ainda não !")])])])],2)])]),y(he,{listaClientes:p.clientes,whatsapp:p.whatsapp,bisemana:Q.value,linkrel:A.value},null,8,["listaClientes","whatsapp","bisemana","linkrel"]),y(be,{painel:$.value,bisemana:c.value,onAtualizaPage:oe},null,8,["painel","bisemana"])])]),_:1})],64))}};export{Pa as default};
