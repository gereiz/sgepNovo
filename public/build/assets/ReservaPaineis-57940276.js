import{j as l,p as ee,h as ue,s as ve,o as i,f as n,a as P,u as L,w as me,F as m,Z as fe,b as e,t as d,k as u,q as h,l as b,g as M,n as z,d as _e,v as se,x as be}from"./app-97e3a743.js";import{_ as he}from"./regiao-35565801.js";import{_ as pe}from"./AuthenticatedLayout-4d280b04.js";import xe from"./ModalCancelRes-0cac40aa.js";import{g as we,a as ge,_ as ke,t as B}from"./ModalWpp-b5001e1e.js";import{s as ye}from"./vue-multiselect.esm-69f7f4ff.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./toastr-68a41d94.js";import"./toastr.min-7041aa71.js";const Ce="/build/assets/spinner-0f1bcd37.png",Pe={class:"w-full h-screen pt-24 pb-32 mx-2 sm:mx-4"},Be={class:"w-full h-14 flex mb-2"},Re={class:"w-2/12 h-14 flex items-center"},je=e("h1",{class:"text-xl sm:text-4xl font-bold"},"Reservas",-1),De={class:"text-lg sm:text-2xl text-red-400 font-bold ml-2 sm:ml-4"},$e={class:"w-full flex flex-row flex-wrap items-center justify-center mb-20 sm:mb-0"},Ve={class:"w-full flex items-center sm:justify-center flex-wrap"},Se={class:"w-5/12 sm:w-1/12 flex flex-col me-4 sm:me-6"},Ee=e("label",{for:"bi-semana"},"Ano",-1),Te=e("option",{value:"0",selected:""},"Selecione",-1),Le=["value"],Me={class:"w-5/12 sm:w-[20%] flex flex-col me-4 sm:me-6"},Ie=e("label",{for:"bi-semana"},"Bi-Semana",-1),Ue=["disabled"],Oe=e("option",{value:"0",selected:"",disabled:""},"Selecione",-1),ze=["value"],Ae={class:"w-full sm:w-1/12 flex flex-col me-4 sm:me-6"},Ne=e("label",{for:"status"},"Status",-1),Ge=["disabled"],Fe=e("option",{value:"0"},"Todos",-1),qe=e("option",{value:"1"},"Disponível",-1),He=e("option",{value:"2"},"Reservado",-1),We=[Fe,qe,He],Ze={class:"w-full sm:w-4/12 flex flex-col sm:-mt-4 me-4 sm:me-6"},Je=e("label",{class:"typo__label"},"Identificação",-1),Ke={class:"w-full flex"},Qe={class:"w-9/12 me-4"},Xe={class:"w-2/12"},Ye={class:"w-full flex items-center justify-center flex-wrap"},es={class:"w-5/12 sm:w-[15%] flex flex-col me-4 sm:me-6"},ss=e("label",{for:"cidades"},"Cidades",-1),ts=["disabled"],as=e("option",{value:"0",selectedd:""},"Todas as Cidades",-1),ls=["value"],os={class:"w-5/12 sm:w-[13%] flex flex-col me-4 sm:me-6"},is=e("label",{for:"regioes"},"Regiões",-1),ns=["disabled"],ds=e("option",{value:"0",selected:""},"Todas as Regiões",-1),cs=["value"],rs={class:"w-full sm:w-[20%] flex flex-col me-4 sm:me-6"},us=e("label",{for:"bairros"},"Bairros",-1),vs=["disabled"],ms=e("option",{value:"0",selected:""},"Todos os Bairros",-1),fs=["value"],_s={class:"space-x-4 mt-3.5 mb-2"},bs={class:"dropdown"},hs={key:0,tabindex:"0",class:"w-fit botao flex items-center bg-green-700 hover:bg-green-500 px-2 py-[0.7rem]"},ps=e("p",{id:"envia_lista"},"Enviar Lista",-1),xs={tabindex:"0",class:"w-56 -ml-10 dropdown-content z-[1] menu p-2 shadow bg-base-200 rounded-box mt-4"},ws=e("li",null,[e("a",null,"Envio por Email")],-1),gs={class:"card w-full max-h-[85%] bg-base-100 shadow-xl overflow-auto rounded-md"},ks={class:"card-body pt-1 sm:pt-2"},ys={class:"w-full flex flex-col flex-wrap sm:flex-row justify-center"},Cs=["id","onClick"],Ps={class:"flex justify-between"},Bs={class:"text-xs sm:card-title"},Rs={class:"text-xs sm:card-title text-red-500"},js={class:"w-full flex justify-end"},Ds={class:"w-full flex flex-col items-center"},$s={class:"w-full mb-4 sm:-ml-4"},Vs=["src"],Ss={class:"w-full sm:w-11/12 flex justify-center flex-wrap"},Es={class:"w-full flex justify-between sm:justify-between flex-wrap space-y-4"},Ts={class:"w-full flex flex-wrap justify-between sm:justify-between"},Ls={class:"text-xs sm:card-title"},Ms={class:"text-xs flex sm:card-title hover:text-red-700"},Is=["href"],Us=e("img",{class:"w-6 ms-4 sm:w-10 sm:hover:w-14 transition-all duration-500",src:he,alt:"Mapa"},null,-1),Os=[Us],zs={class:"w-full flex flex-wrap justify-between sm:justify-between"},As={class:"text-xs sm:card-title"},Ns={class:"w-full flex justify-center flex-wrap space-y-2 mb-4"},Gs=e("button",{class:"w-11/12 sm:w-10/12 botao bg-sky-700 hover:bg-sky-500"},"Detalhes",-1),Fs=["onClick"],qs=["onClick"],Hs=e("input",{type:"checkbox",id:"modal-reserva",class:"modal-toggle"},null,-1),Ws={class:"modal flex items-end md:items-center"},Zs={class:"modal-box"},Js={class:"flex mb-4"},Ks=e("label",{for:"modal-reserva",class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),Qs=e("h3",{class:"font-bold text-lg"},"Reservar Painel:",-1),Xs={class:"font-bold text-lg ml-2 text-red-500"},Ys={class:"w-full flex flex-col sm:flex-row flex-wrap space-y-4 sm:space-y-8"},et={class:"w-full flex flex-col"},st=e("span",{class:"label-text ml-1"},"Bi-semana",-1),tt={name:"",id:"",class:"select select-bordered",disabled:""},at=["value"],lt={class:"w-full sm:w-6/12 flex flex-col me-4"},ot=e("span",{class:"label-text ml-1"},"Cliente",-1),it=["disabled"],nt=["value"],dt={class:"w-full sm:w-5/12 flex flex-col"},ct=e("span",{class:"label-text ml-1"},"Campanha",-1),rt=["disabled"],ut={class:"w-full flex flex-col"},vt=e("span",{class:"label-text ml-1"},"Mensagem",-1),mt=["disabled"],ft={class:"w-full flex flex-col"},_t={class:"form-control"},bt={class:"cursor-pointer"},ht=e("span",{class:"label-text text-lg sm:text-xl me-4"},"Existe P. I. para esta reserva?",-1),pt={class:"modal-action"},xt={method:"dialog",class:"modal-box bg-white"},wt=e("h3",{class:"font-black text-2xl text-red-700 animate-pulse duration-200 text-center"},"ATENÇÃO!",-1),gt=e("p",{class:"py-4"},"Ao Marcar que existe uma P. I. para esta reserva não será mais possível alterá-la!",-1),kt=e("p",{class:"py-4"},"Confirme somente se tiver certeza da reserva.",-1),yt={class:"modal-action"},Ct={class:"w-full flex justify-center space-x-4"},Tt={__name:"ReservaPaineis",props:["ambiente","reservas","anos","paineis","clientes","bisemanas","cidades","regioes","bairros","whatsapp"],setup(I){const p=I;l(null);const U=l(!0),A=l(""),R=l([]),v=l([]),x=l([]),f=l([]),g=l(p.paineis),N=ee([]),G=l(""),k=l(""),O=l(!0),F=l(!0),q=l(!0),H=l(!0),j=l(0),c=l(0),w=l(0),D=l(0),y=l(0),$=l(0),W=l(0),Z=l(0),J=l(0),V=l(""),_=l(!1),K=l(null),S=l(!1),r=ee({cliente:"",campanha:"",observ:""}),Q=ue(()=>Object.values(p.bisemanas).filter(t=>t.id===c.value));ve(()=>{ce()});function te(){axios.post("/GetBisemanas",{bisemana:j.value}).then(a=>{W.value=Object.values(a.data),O.value=!1,c.value=0})}function ae(){axios.post("/GetRegioes",{idCid:D.value}).then(a=>{Z.value=Object.values(a.data),y.value=0,$.value=0})}function le(){axios.post("/GetBairros",{idReg:y.value}).then(a=>{J.value=Object.values(a.data)})}function E(){c.value===0?B.error("É necessário informar uma Bi-semana"):w.value===0?B.error("É necessário informar um Status"):axios.post("/GetPaineis",{ano:j.value,bisemana:c.value,statusPainel:w.value,cidade:D.value,regiao:y.value,bairro:$.value}).then(a=>{g.value=a.data,k.value=w.value})}function oe(a){E()}function X(a){V.value=a,G.value=p.clientes,c.value===0&&setTimeout(()=>{B.error("É necessário infrmar a Bi-semana Primeiro")},500)}function ie(a,t,s,o){const C=R.value[a];Object.values(v.value).includes(t)?(v.value.splice(v.value.indexOf(t),1),x.value.splice(x.value.indexOf(o),1),f.value.splice(f.value.indexOf(s),1),C.checked=!1):(v.value.push(t),x.value.push(o),f.value.push(s),C.checked=!0),v.value.length===0&&(x.value=[],f.value=[])}function ne(){let a=0;T(),g.value.forEach(t=>{let s=R.value[a];v.value.push(t.identificacao),x.value.push(t),f.value.push(t.id),s.checked=!0,a++})}function T(){v.value=[],f.value=[],x.value=[],R.value.forEach(t=>{t.checked=!1})}function de(){if(_.value){let a=K.value;S.value=!0,a.showModal()}}function ce(){g.value.forEach(a=>{N.push(a.identificacao)})}function re(a){axios.post("/ReservaPainel",{clienteId:r.cliente,outdoorId:a,bsId:c.value,campanha:r.campanha,obs:r.observ,checkPi:_.value}).then(t=>{t.data.cod===0?B.error(t.data.msg):t.data.cod==1&&(B.success(t.data.msg),r.cliente="",r.campanha="",r.observ="",_.value=!1,setTimeout(()=>{E()},500))})}function Y(a){let t=document.getElementById("envia_lista");U.value=!1,axios.post("/setData",{numBs:c.value,idPaineis:f.value}).then(s=>{t.innerHTML="Carregando...",setTimeout(()=>{axios.post("/relDisponiveis",{tpEnvio:a}).then(o=>{console.log("Relatório gerado"),a=="wpp"?A.value=o.data:a=="pdf"&&window.open("/relDisponiveis","_blank"),t.innerHTML="Enviar Lista",U.value=!0}).catch(o=>{console.log("Relatório não gerado")})},2e3)}).catch(s=>{console.log("Dados não Enviados")})}return(a,t)=>(i(),n(m,null,[P(L(fe),{title:"Reservas"}),P(pe,null,{default:me(()=>[e("div",Pe,[e("div",Be,[e("div",Re,[je,e("h1",De,d(g.value.length),1)])]),e("div",$e,[e("div",Ve,[e("div",Se,[Ee,u(e("select",{class:"select-paineis",name:"ano",id:"ano","onUpdate:modelValue":t[0]||(t[0]=s=>j.value=s),onChange:t[1]||(t[1]=s=>te())},[Te,(i(!0),n(m,null,b(I.anos,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.ano_bisemana),9,Le))),128))],544),[[h,j.value]])]),e("div",Me,[Ie,u(e("select",{class:"select-paineis",name:"bi-semana",id:"bi-semama","onUpdate:modelValue":t[2]||(t[2]=s=>c.value=s),disabled:O.value,onChange:t[3]||(t[3]=s=>(w.value=0,F.value=!1))},[Oe,(i(!0),n(m,null,b(W.value,(s,o)=>(i(),n("option",{key:o,value:s.id},"BS: "+d(s.num_bisemana)+" "+d(new Date(s.inicio).toLocaleDateString())+" até "+d(new Date(s.fim).toLocaleDateString()),9,ze))),128))],40,Ue),[[h,c.value]])]),e("div",Ae,[Ne,u(e("select",{class:"select-paineis",name:"status",id:"status",disabled:F.value,"onUpdate:modelValue":t[4]||(t[4]=s=>w.value=s),onChange:t[5]||(t[5]=s=>(E(),T()))},We,40,Ge),[[h,w.value]])]),e("div",Ze,[Je,e("div",Ke,[e("div",Qe,[P(L(ye),{disabled:"",modelValue:v.value,"onUpdate:modelValue":t[6]||(t[6]=s=>v.value=s),options:N,multiple:!0,searchable:!0,"close-on-select":!1,"show-labels":!1,placeholder:"Todos"},null,8,["modelValue","options"])]),e("div",Xe,[e("button",{onClick:t[7]||(t[7]=s=>T()),class:"botao max-h-10 bg-red-700 hover:bg-red-500"},"Limpar")])])])]),e("div",Ye,[e("div",es,[ss,u(e("select",{class:"select-paineis",name:"cidades",id:"cidades",disabled:O.value,"onUpdate:modelValue":t[8]||(t[8]=s=>D.value=s),onChange:t[9]||(t[9]=s=>(q.value=!1,ae()))},[as,(i(!0),n(m,null,b(I.cidades,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,ls))),128))],40,ts),[[h,D.value]])]),e("div",os,[is,u(e("select",{class:"select-paineis",name:"regioes",id:"regioes",disabled:q.value,"onUpdate:modelValue":t[10]||(t[10]=s=>y.value=s),onChange:t[11]||(t[11]=s=>(H.value=!1,le()))},[ds,(i(!0),n(m,null,b(Z.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,cs))),128))],40,ns),[[h,y.value]])]),e("div",rs,[us,u(e("select",{class:"select-paineis",name:"bairros",id:"bairros",disabled:H.value,"onUpdate:modelValue":t[12]||(t[12]=s=>$.value=s)},[ms,(i(!0),n(m,null,b(J.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,fs))),128))],8,vs),[[h,$.value]])]),e("div",_s,[e("button",{class:"botao bg-sky-700 hover:bg-sky-500",onClick:t[13]||(t[13]=s=>(E(),T()))}," Filtrar "),k.value==1?(i(),n("button",{key:0,onClick:t[14]||(t[14]=s=>ne()),class:"botao w-32 max-h-10 bg-fuchsia-700 hover:bg-fuchsia-500"}," Marcar Todos ")):M("",!0),e("div",bs,[f.value.length>0&&k.value==1?(i(),n("label",hs,[e("img",{src:Ce,class:z(["w-4 h-4 me-2 animate-spin",{hidden:U.value}]),alt:"spinner"},null,2),ps])):M("",!0),e("ul",xs,[e("li",null,[e("label",{onClick:t[15]||(t[15]=s=>Y("wpp")),for:"modal-wpp"},"Envio por Whatsapp")]),ws,e("li",null,[e("label",{onClick:t[16]||(t[16]=s=>Y("pdf"))},"Download do Relatório")])])])])])]),e("div",gs,[e("div",ks,[e("div",ys,[(i(!0),n(m,null,b(g.value,(s,o)=>(i(),n("div",{key:o,class:"card w-full sm:w-5/12 bg-base-100 border-2 rounded-md shadow-xl mt-4 sm:mr-4"},[e("div",{class:"card-body",id:o,onClick:C=>ie(o,s.identificacao,s.id,s)},[e("div",Ps,[e("h2",Bs,d(s.cnome),1),e("h2",Rs,"Identificação.: "+d(s.identificacao),1)]),e("div",js,[e("input",{type:"checkbox",ref_for:!0,ref_key:"itemRefs",ref:R,class:"w-14 h-14 border-0 checkbox checkbox-success"},null,512)]),e("div",Ds,[e("div",$s,[e("img",{class:"img-painel",src:L(we)(p.ambiente,s.image_url),alt:"Bairro"},null,8,Vs)]),e("div",Ss,[e("div",Es,[e("div",Ts,[e("h2",Ls,"Bairro: "+d(s.bnome),1),e("h2",Ms,[_e("Ver Localização "),e("a",{href:L(ge)(s.latitude,s.longitude),target:"_blank"},Os,8,Is)])]),e("div",zs,[e("h2",As,"Localização: "+d(s.logradouro)+" - "+d(s.numero),1)])])])])],8,Cs),e("div",Ns,[Gs,k.value==1?(i(),n("label",{key:0,for:"modal-reserva",class:"w-11/12 sm:w-10/12 h-10 botao-modal bg-green-700 hover:bg-green-500",onClick:C=>X(s)}," Reservar ",8,Fs)):M("",!0),k.value==2?(i(),n("label",{key:1,onClick:C=>X(s),for:"modal-canc-reserva",class:"w-11/12 sm:w-10/12 h-10 botao-modal bg-red-700 hover:bg-red-500"}," Cancelar ",8,qs)):M("",!0)])]))),128))])])]),Hs,e("div",Ws,[e("div",Zs,[e("div",Js,[Ks,Qs,e("h3",Xs,"Identificação "+d(V.value.identificacao),1)]),e("form",null,[e("div",Ys,[e("div",et,[st,e("select",tt,[(i(!0),n(m,null,b(Q.value,(s,o)=>(i(),n("option",{key:o,value:s.id},"BS: "+d(s.num_bisemana)+" "+d(new Date(s.inicio).toLocaleDateString())+" até "+d(new Date(s.fim).toLocaleDateString()),9,at))),128))])]),e("div",lt,[ot,u(e("select",{"onUpdate:modelValue":t[17]||(t[17]=s=>r.cliente=s),name:"",id:"",class:"select select-bordered",disabled:c.value==0},[(i(!0),n(m,null,b(G.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome_fantasia?s.nome_fantasia:s.razao_social),9,nt))),128))],8,it),[[h,r.cliente]])]),e("div",dt,[ct,u(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>r.campanha=s),type:"text",name:"",id:"",class:"input input-bordered",disabled:c.value==0},null,8,rt),[[se,r.campanha]])]),e("div",ut,[vt,u(e("textarea",{"onUpdate:modelValue":t[19]||(t[19]=s=>r.observ=s),name:"",id:"",class:"textarea textarea-bordered textarea-lg",disabled:c.value==0},null,8,mt),[[se,r.observ]])]),e("div",ft,[e("div",_t,[e("label",bt,[ht,u(e("input",{type:"checkbox","onUpdate:modelValue":t[20]||(t[20]=s=>_.value=s),onClick:t[21]||(t[21]=s=>(_.value=!_.value,de())),class:"checkbox checkbox-lg checkbox-success border-2 border-gray-400"},null,512),[[be,_.value]])])])])]),e("div",pt,[e("label",{for:"modal-reserva",class:z(["w-full botao-modal",{"bg-slate-400":c.value==0,"hover:bg-slate-400":c.value==0}]),onClick:t[22]||(t[22]=s=>re(V.value.id))},"Reservar",2)])]),e("dialog",{id:"modal_confirm",ref_key:"confPi",ref:K,class:z(["bg-transparent flex justify-center",{hidden:!S.value}])},[e("form",xt,[wt,gt,kt,e("div",yt,[e("div",Ct,[e("button",{class:"w-5/12 botao-primario",onClick:t[23]||(t[23]=s=>S.value=!1)},"Confirmar"),e("button",{onClick:t[24]||(t[24]=s=>(_.value=!1,S.value=!1)),class:"w-5/12 botao-danger"},"Ainda não !")])])])],2)])]),P(ke,{listaClientes:p.clientes,whatsapp:p.whatsapp,bisemana:Q.value,linkrel:A.value},null,8,["listaClientes","whatsapp","bisemana","linkrel"]),P(xe,{painel:V.value,bisemana:c.value,onAtualizaPage:oe},null,8,["painel","bisemana"])])]),_:1})],64))}};export{Tt as default};
