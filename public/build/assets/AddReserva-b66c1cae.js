import{o as y,f as k,b as e,j as t,k as q,c as W,w as f,a as n,u as l,d as M,m as N,v as F,Q as X,z as ee,x as se,h as ae,g as te,F as S,p as oe,t as R,l as ne}from"./app-a0ee21ef.js";import{_ as le,a as ie}from"./painel_conv-45a82d16.js";import{_ as re}from"./regiao-35565801.js";import{a as ce}from"./functions-e6ce0893.js";import{s as de}from"./vue-multiselect.esm-a54b2258.js";import{t as me}from"./toastr-6cc5e9af.js";import{r as ue}from"./ClipboardDocumentCheckIcon-608c2712.js";import{Y as T,h as z,G as U,V as E,S as Z}from"./transition-ddbcad86.js";import{u as ve}from"./toastr-4cdd8a3e.js";import fe from"./ModalPiRes-66d6309e.js";import"./html2pdf-30a93cdf.js";/* empty css                   */import"./StepOnePi-d643295a.js";import"./maska-1eacf752.js";import"./UserCircleIcon-50c93c40.js";import"./StepTwoPi-b2f179a8.js";import"./StepThreePi-4b9d6e38.js";import"./StepFourPi-ee7db6c9.js";import"./XMarkIcon-434a425d.js";function G(p,O){return y(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0ZM8.94 6.94a.75.75 0 1 1-1.061-1.061 3 3 0 1 1 2.871 5.026v.345a.75.75 0 0 1-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 1 0 8.94 6.94ZM10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd"})])}const pe=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),he={class:"fixed inset-0 z-10 overflow-y-auto"},xe={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},ge={class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100"},be={class:"mt-3 text-center sm:mt-5 space-y-4"},_e=e("span",{class:"text-red-500 font-extrabold"},null,-1),we={class:"w-full flex flex-col items-center justify-end"},ye={class:"w-11/12 flex flex-col flex-wrap"},Ce=e("label",{for:"campanha",class:"block text-sm font-medium leading-6 text-gray-900"},[M("Inclua o Título da Campanha. "),e("span",{class:"text-red-500 italic"}," (Obrigatório) ")],-1),ke={class:"w-full flex flex-col items-center justify-end"},Pe={class:"w-11/12 flex flex-col flex-wrap"},$e=e("label",{for:"obsevacoes",class:"block text-sm font-medium leading-6 text-gray-900"},[M("Inclua observações sobre a reseva. "),e("span",{class:"text-red-500 italic"}," (opcional) ")],-1),Oe={class:"w-full mt-2"},je=["disabled"],Ve={class:"mt-5 sm:mt-6 w-full space-y-4 space-x-2 border-t border-gray-200 pt-4"},Be={__name:"ConfirmaReserva",props:["open"],emits:["campanha","obsevacoes","closeObs"],setup(p,{emit:O}){const x=p,v=O,d=t(""),m=t(""),g=t(!1);q(()=>x.open,_=>{_===!0&&(g.value=!0)});function j(){d.value="",m.value="",v("campanha",d.value),v("observacoes",m.value)}function b(){g.value=!1,v("closeObs",g.value)}function $(){v("campanha",d.value),v("observacoes",m.value),b()}return(_,i)=>(y(),W(l(Z),{as:"template",show:g.value},{default:f(()=>[n(l(T),{as:"div",class:"relative z-10"},{default:f(()=>[n(l(z),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:f(()=>[pe]),_:1}),e("div",he,[e("div",xe,[n(l(z),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:f(()=>[n(l(U),{class:"relative transform overflow-hidden rounded-lg bg-white w-full sm:w-[42.5%] sm:p-6 sm:ml-[15%] sm:my-4 pb-4 pt-5 text-left shadow-xl transition-all"},{default:f(()=>[e("div",null,[e("div",ge,[n(l(ue),{class:"h-6 w-6 text-green-600","aria-hidden":"true"})]),e("div",be,[n(l(E),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:f(()=>[M(" Informe a Campanha e Observações sobre a reserva. "),_e]),_:1}),e("div",we,[e("div",ye,[Ce,N(e("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=w=>d.value=w),name:"campanha",id:"campanha",class:"block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Informar campanha"},null,512),[[F,d.value]])])]),e("div",ke,[e("div",Pe,[$e,e("div",Oe,[N(e("textarea",{rows:"4",name:"obsevacoes",disabled:d.value=="",id:"obsevacoes","onUpdate:modelValue":i[1]||(i[1]=w=>m.value=w),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,je),[[F,m.value]])])])]),e("div",Ve,[e("label",{class:"mt-3 inline-flex w-5/12 justify-center rounded-md bg-gray-200 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-5/12",onClick:i[2]||(i[2]=w=>(b(),j()))}," Cancelar "),e("label",{class:"inline-flex w-5/12 justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 sm:w-5/12",onClick:i[3]||(i[3]=w=>$())}," Confirmar ")])])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}},Ie={class:"w-full flex flex-wrap sm:flex-none mt-2 space-y-4 sm:space-y-0"},Ae={class:"sm:w-4/12 w-full justify-center mb-2"},Le={class:"w-10/12 ms-10 relative mt-2 rounded-md shadow-sm"},Re={class:"sm:w-6/12 w-full justify-center"},qe={class:"w-10/12 relative ms-10 sm:ms-0 mt-1 rounded-md shadow-sm"},ze={class:"w-full flex"},Me={class:"w-9/12 me-4"},Ne={class:"w-2/12"},Fe={key:0,class:"sm:w-1/12 w-full sm:-ms-20"},Se={key:1,class:"sm:w-1/12 w-full sm:-ms-20"},De={class:"card w-full h-[28rem] sm:h-[35rem] bg-base-100 border border-base-200 shadow-xl overflow-auto rounded-md"},Ge={class:"card-body flex flex-col sm:flex-row"},Te={class:"w-full flex flex-col flex-wrap md:flex-row"},Ue=["id"],Ee=["id","onClick"],Ze={class:"w-full flex-col sm:flex sm:flex-wrap"},Ye={class:"w-full flex justify-between max-h-8 -mt-4"},Qe={key:0,class:"mb-2 w-6 h-6 sm:w-8 sm:h-8 sm:hover:w-10 sm:hover:h-10 transition-all duration-1000",src:le,alt:"Painel Nobre",title:"Painel Nobre"},He={key:1,class:"mb-2 w-6 h-6 sm:w-8 sm:h-8 sm:hover:w-10 sm:hover:h-10 transition-all duration-1000",src:ie,alt:"Painel Convêncional",title:"Painel Convêncional"},Je={class:"text-xs sm:text-lg font-bold text-red-500"},Ke={class:"w-full flex flex-wrap sm:flex-nowrap justify-center my-2 sm:-ml-2 space-x-2"},We={class:"w-full flex justify-center sm:w-6/12"},Xe=["src"],es={class:"w-full sm:w-6/12"},ss={class:"sm:flex flex-wrap"},as={class:"w-full flex flex-col items-center space-y-3 mt-4 sm:mt-0"},ts={class:"text-xs sm:text-md font-extrabold"},os={class:"text-xs sm:card-md"},ns=e("p",{class:"text-xs sm:text-md hover:text-red-700 sm:ml-4"}," Ver Localização ",-1),ls=["href"],is=e("img",{class:"w-6 h-6 ms-4 -mt-1 sm:hover:w-10 sm:hover:h-10 transition-all duration-500",src:re,alt:"Mapa"},null,-1),rs=[is],cs={__name:"GridPaineis",props:["tipoPainel","cliente","bisemana","paineis"],emits:["checkedPaineis","checkedPaineisId","campanha","observacoes"],setup(p,{emit:O}){const x=p,v=O,d=X(),m=ve(),g=d.props.user.permissions.includes("liberar reserva"),j=d.props.user.permissions.includes("liberar reserva painel 04"),b=t(""),$=t(""),_=t(""),i=t(""),w=t(""),I=t(x.paineis),A=t([]),u=t([]),V=t([]),B=t([]),C=t([]),P=t("");let r=ee([]);se(()=>{D()}),q(()=>i.value,o=>{v("campanha",i.value),v("observacoes",w.value)}),q(()=>x.bisemana,o=>{D()});function c(o){o==="t"?_.value=!0:_.value=!1}const h=ae(()=>I.value.filter(s=>String(s.identificacao).toLowerCase().indexOf(b.value.toLowerCase())>-1));function Y(o,s,a){if($.value=A.value[o],$.classList,P.value=Object.values(I.value).find(L=>L.identificacao===s),!j&&s===4&&C.value.length<4){m.error("O painel 04 não pode ser reservado sem no mínimo 4 painéis convencionais");return}if(!g)if(P.value.tipo==="2")C.value.push(P.value.identificacao);else if(B.value.length*2>=C.value.length){m.error("O número de painéis nobres não pode ser maior que o dobro do número de painéis convencionais");return}else if(C.value.length===1&&P.value.tipo==="1"){m.error("O número de painéis convencionais não pode ser menor que 2");return}else if(B.value.length===1&&C.value.length===3&&P.value.tipo==="1"){m.error("O número de painéis nobres não pode ser maior que o dobro do número de painéis convencionais");return}else B.value.push(P.value.identificacao);Object.values(u.value).includes(s)?(u.value.splice(u.value.indexOf(s),1),V.value.splice(u.value.indexOf(a),1)):(u.value.push(s),V.value.push(a),document.getElementById(s).classList.add("hidden")),v("checkedPaineis",u.value),v("checkedPaineisId",V.value)}function D(){axios.post("/GetPaineis",{statusPainel:x.tipoPainel,bisemana:x.bisemana}).then(o=>{I.value=o.data}).catch(o=>{console.log(o)})}function Q(o){if(x.ambiente=="local")var s="http://localhost:8000/storage/"+o;else var s="/storage/"+o;return s}function H(){u.value=[],V.value=[],B.value=[],C.value=[],i.value="",A.value.forEach(s=>{s.classList.remove("hidden")})}function J(o){i.value=o}function K(o){w.value=o}return(o,s)=>(y(),k(S,null,[e("div",Ie,[e("div",Ae,[e("div",Le,[N(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>b.value=a),name:"pesquisa_painel",id:"pesquisa_painel",class:"block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Pesquisar Painel"},null,512),[[F,b.value]])])]),e("div",Re,[e("div",qe,[e("div",ze,[e("div",Me,[n(l(de),{disabled:"",modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=a=>u.value=a),options:l(r),multiple:!0,"close-on-select":!0,"show-labels":!0,placeholder:"Painéis Selecionados"},null,8,["modelValue","options"])]),e("div",Ne,[e("button",{onClick:s[2]||(s[2]=a=>H()),class:"botao max-h-10 bg-red-700 hover:bg-red-500"},"Limpar")])])])]),u.value.length>0&&i.value==""?(y(),k("div",Fe,[e("button",{title:"Preencher Campanha e Observações",onClick:s[3]||(s[3]=a=>c("t"))},[n(l(G),{class:"-mt-1 w-14 h-14 sm:w-14 sm:h-14 text-red-600 hover:text-red-700 transition-all duration-1000 animate-bounce"})])])):u.value.length>0&&i.value!=""?(y(),k("div",Se,[e("button",{title:"Campanha e Observações preenchidos",onClick:s[4]||(s[4]=a=>c("t"))},[n(l(G),{class:"-mt-1 w-14 h-14 sm:w-14 sm:h-14 text-green-600 hover:text-green-700 transition-all duration-1000 animate-bounce"})])])):te("",!0)]),e("div",De,[e("div",Ge,[e("div",Te,[(y(!0),k(S,null,oe(h.value,(a,L)=>(y(),k("div",{key:L,ref_for:!0,ref_key:"itemRefs",ref:A,id:a.identificacao,class:"card w-full sm:w-[30%] card-reserva-cliente"},[e("div",{class:"card-body flex",id:L,onClick:hs=>Y(L,a.identificacao,a.id)},[e("div",Ze,[e("div",Ye,[a.tipo==="1"?(y(),k("img",Qe)):(y(),k("img",He)),e("span",Je,"Identificação.: "+R(a.identificacao),1)]),e("div",Ke,[e("div",We,[e("img",{class:"w-[240px] h-[140px] hover:scale-150 transition-all duration-1000 rounded-md",src:Q(a.image_url),alt:"Foto-painel"},null,8,Xe)]),e("div",es,[e("div",ss,[e("div",as,[e("p",ts,"Bairro: "+R(a.bnome),1),e("p",os,R(a.logradouro)+" - "+R(a.numero),1),ns,e("a",{href:l(ce)(a.latitude,a.longitude),target:"_blank"},rs,8,ls)])])])])])],8,Ee)],8,Ue))),128))])])]),n(Be,{open:_.value,onCloseObs:c,onCampanha:s[5]||(s[5]=a=>J(a)),onObservacoes:s[6]||(s[6]=a=>K(a))},null,8,["open"])],64))}},ds=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),ms={class:"fixed inset-0 z-10 overflow-y-auto mt-16"},us={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},vs={class:"mt-3 text-center sm:mt-5"},fs={class:"text-red-500 font-extrabold"},ps={class:"mt-5 sm:mt-6 w-full space-y-4 space-x-2 border-t border-gray-200 pt-4"},zs={__name:"AddReserva",props:["openAdd","cliente","bisemana","paineis"],emits:["closeAdd"],setup(p,{emit:O}){const x=p,v=O,d=t(!1),m=t(!1),g=t([]),j=t([]),b=t(""),$=t(""),_=t("");q(()=>x.openAdd,r=>{r===!0&&(d.value=!0,A())});function i(r){g.value=[],g.value.push(r)}function w(r){j.value=[],j.value.push(r)}function I(r){b.value=r}function A(){ne.post("/getBisemana",{idBs:x.bisemana}).then(r=>{_.value=r.data})}function u(r){$.value=r}function V(){if(b.value===""){me.error("É obrigatório Informar a campanha!");return}B("t")}function B(r){r==="t"&&(m.value=!0)}function C(){d.value=!1,v("closeAdd",d.value)}function P(){m.value=!1}return(r,c)=>(y(),k(S,null,[n(l(Z),{as:"template",show:d.value},{default:f(()=>[n(l(T),{as:"div",class:"relative z-10"},{default:f(()=>[n(l(z),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:f(()=>[ds]),_:1}),e("div",ms,[e("div",us,[n(l(z),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:f(()=>[n(l(U),{class:"relative transform overflow-hidden rounded-lg bg-white w-full sm:w-[82.5%] sm:p-6 sm:my-4 pb-4 pt-5 text-left shadow-xl transition-all"},{default:f(()=>[e("div",null,[e("div",vs,[n(l(E),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:f(()=>[M(" Reservar painéis para o cliente: "),e("span",fs,R(p.cliente.nome_fantasia?p.cliente.nome_fantasia:p.cliente.razao_social),1)]),_:1}),n(cs,{tipoPainel:"D",bisemana:_.value,paineis:p.paineis,onCheckedPaineis:c[0]||(c[0]=h=>i(h)),onCheckedPaineisId:c[1]||(c[1]=h=>w(h)),onCampanha:c[2]||(c[2]=h=>I(h)),onObservacoes:c[3]||(c[3]=h=>u(h))},null,8,["bisemana","paineis"]),e("div",ps,[e("label",{class:"mt-3 inline-flex w-5/12 justify-center rounded-md bg-gray-200 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-5/12",onClick:c[4]||(c[4]=h=>C())}," Cancelar "),e("label",{class:"inline-flex w-5/12 justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 sm:w-5/12",onClick:c[5]||(c[5]=h=>V())}," Criar Reserva ou PI ")])])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),n(fe,{openPi:m.value,paineis:g.value,campanha:b.value,observacoes:$.value,onClosePi:P,onCloseAdd:C,cliente:p.cliente,bisemana:_.value},null,8,["openPi","paineis","campanha","observacoes","cliente","bisemana"])],64))}};export{zs as default};
