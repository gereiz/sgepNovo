import{j as t,p as H,h as ce,s as re,o,f as n,a as S,u as J,w as ue,F as v,Z as me,b as e,t as d,k as m,q as h,l as _,g as V,v as K,x as ve,n as Q,c as fe}from"./app-3d7d1c24.js";import{_ as _e}from"./AuthenticatedLayout-444c93e0.js";import be from"./ModalCancelRes-bafc02a0.js";import he from"./RelatorioDisponibiliadade-342f1b61.js";import{u as pe}from"./toastr-e9dafa4a.js";import{s as xe}from"./vue-multiselect.esm-873750c5.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./toastr.min-4fdc95f7.js";const we={class:"w-full h-screen pt-24 pb-32 mx-2 sm:mx-4"},ge={class:"w-full h-14 flex mb-2"},ke={class:"w-2/12 h-14 flex items-center"},ye=e("h1",{class:"text-xl sm:text-4xl font-bold"},"Reservas",-1),Ce={class:"text-lg sm:text-2xl text-red-400 font-bold ml-2 sm:ml-4"},Pe={class:"w-full flex flex-row flex-wrap items-center justify-center mb-20 sm:mb-0"},Be={class:"w-full flex items-center sm:justify-center flex-wrap"},Re={class:"w-5/12 sm:w-1/12 flex flex-col me-4 sm:me-6"},je=e("label",{for:"bi-semana"},"Ano",-1),$e=e("option",{value:"0",selected:""},"Selecione",-1),De=["value"],Se={class:"w-5/12 sm:w-[20%] flex flex-col me-4 sm:me-6"},Ve=e("label",{for:"bi-semana"},"Bi-Semana",-1),Te=["disabled"],Ue=e("option",{value:"0",selected:"",disabled:""},"Selecione",-1),Ie=["value"],Ee={class:"w-full sm:w-1/12 flex flex-col me-4 sm:me-6"},Oe=e("label",{for:"status"},"Status",-1),Le=e("option",{value:"0"},"Todos",-1),Me=e("option",{value:"1"},"Disponível",-1),ze=e("option",{value:"2"},"Reservado",-1),Ae=[Le,Me,ze],Fe={class:"w-full sm:w-4/12 flex flex-col sm:-mt-4 me-4 sm:me-6"},Ge=e("label",{class:"typo__label"},"Identificação",-1),Ne={class:"w-full flex"},qe={class:"w-9/12 me-4"},We={class:"w-2/12"},Ze={class:"w-full flex items-center justify-center flex-wrap"},He={class:"w-5/12 sm:w-[15%] flex flex-col me-4 sm:me-6"},Je=e("label",{for:"cidades"},"Cidades",-1),Ke=["disabled"],Qe=e("option",{value:"0",selectedd:""},"Todas as Cidades",-1),Xe=["value"],Ye={class:"w-5/12 sm:w-[13%] flex flex-col me-4 sm:me-6"},es=e("label",{for:"regioes"},"Regiões",-1),ss=["disabled"],as=e("option",{value:"0",selected:""},"Todas as Regiões",-1),ts=["value"],ls={class:"w-full sm:w-[20%] flex flex-col me-4 sm:me-6"},os=e("label",{for:"bairros"},"Bairros",-1),is=["disabled"],ns=e("option",{value:"0",selected:""},"Todos os Bairros",-1),ds=["value"],cs={class:"space-x-4 mt-3.5 mb-2"},rs={class:"dropdown"},us={key:0,tabindex:"0",class:"w-fit botao bg-green-700 hover:bg-green-500 px-2 py-[0.7rem]"},ms={tabindex:"0",class:"w-56 -ml-10 dropdown-content z-[1] menu p-2 shadow bg-base-200 rounded-box mt-4"},vs=e("li",null,[e("a",null,"Envio por Whatsapp")],-1),fs=e("li",null,[e("a",null,"Envio por Email")],-1),_s={class:"card w-full max-h-[85%] bg-base-100 shadow-xl overflow-auto rounded-md"},bs={class:"card-body pt-1 sm:pt-2"},hs={class:"w-full flex flex-col flex-wrap sm:flex-row justify-center"},ps=["id","onClick"],xs={class:"w-full flex justify-end"},ws={class:"w-full flex flex-col items-center"},gs={class:"w-full mb-4 -ml-4"},ks=["src"],ys={class:"w-full sm:w-11/12 flex justify-center flex-wrap mb-4"},Cs={class:"w-full flex justify-between sm:justify-between flex-wrap space-y-4"},Ps={class:"w-full flex flex-wrap justify-between sm:justify-between"},Bs={class:"text-xs sm:card-title"},Rs={class:"text-xs sm:card-title"},js={class:"w-full flex flex-wrap justify-between sm:justify-between"},$s={class:"text-xs sm:card-title"},Ds={class:"text-xs sm:card-title text-red-500"},Ss={class:"w-full flex justify-center flex-wrap space-y-2 mb-4"},Vs=e("button",{class:"w-11/12 sm:w-10/12 botao bg-sky-700 hover:bg-sky-500"},"Detalhes",-1),Ts=["onClick"],Us=["onClick"],Is=e("input",{type:"checkbox",id:"modal-reserva",class:"modal-toggle"},null,-1),Es={class:"modal flex items-end md:items-center"},Os={class:"modal-box"},Ls={class:"flex mb-4"},Ms=e("label",{for:"modal-reserva",class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),zs=e("h3",{class:"font-bold text-lg"},"Reservar Painel:",-1),As={class:"font-bold text-lg ml-2 text-red-500"},Fs={class:"w-full flex flex-col sm:flex-row flex-wrap space-y-4 sm:space-y-8"},Gs={class:"w-full flex flex-col"},Ns=e("span",{class:"label-text ml-1"},"Bi-semana",-1),qs={name:"",id:"",class:"select select-bordered",disabled:""},Ws=["value"],Zs={class:"w-full sm:w-6/12 flex flex-col me-4"},Hs=e("span",{class:"label-text ml-1"},"Cliente",-1),Js=["disabled"],Ks=["value"],Qs={class:"w-full sm:w-5/12 flex flex-col"},Xs=e("span",{class:"label-text ml-1"},"Campanha",-1),Ys=["disabled"],ea={class:"w-full flex flex-col"},sa=e("span",{class:"label-text ml-1"},"Mensagem",-1),aa=["disabled"],ta={class:"w-full flex flex-col"},la={class:"form-control"},oa={class:"cursor-pointer"},ia=e("span",{class:"label-text text-lg sm:text-xl me-4"},"Existe P. I. para esta reserva?",-1),na={class:"modal-action"},da={method:"dialog",class:"modal-box bg-white"},ca=e("h3",{class:"font-black text-2xl text-red-700 animate-pulse duration-200 text-center"},"ATENÇÃO!",-1),ra=e("p",{class:"py-4"},"Ao Marcar que existe uma P. I. para esta reserva não será mais possível alterá-la!",-1),ua=e("p",{class:"py-4"},"Confirme somente se tiver certeza da reserva.",-1),ma={class:"modal-action"},va={class:"w-full flex justify-center space-x-4"},ka={__name:"ReservaPaineis",props:["ambiente","reservas","anos","paineis","clientes","bisemanas","cidades","regioes","bairros"],setup(T){const w=T,g=pe(),L=t(null),U=t([]);t("");const u=t([]),p=t([]),y=t([]),C=t(w.paineis),M=H([]),z=t(""),I=t(""),E=t(!0),A=t(!0),F=t(!0),P=t(0),c=t(0),b=t(0),B=t(0),k=t(0),R=t(0),G=t(0),N=t(0),q=t(0),j=t("");t("");const f=t(!1),W=t(null),$=t(!1),r=H({cliente:"",campanha:"",observ:""}),X=ce(()=>Object.values(w.bisemanas).filter(a=>a.id===c.value));re(()=>{ie()});function Y(l){if(w.ambiente=="local")var a="http://[::1]:5173/storage/app/public/"+l;else var a="/storage/"+l;return a}function ee(){axios.post("/GetBisemanas",{bisemana:P.value}).then(l=>{G.value=Object.values(l.data),E.value=!1,c.value=0})}function se(){axios.post("/GetRegioes",{idCid:B.value}).then(l=>{N.value=Object.values(l.data),k.value=0,R.value=0})}function ae(){axios.post("/GetBairros",{idReg:k.value}).then(l=>{q.value=Object.values(l.data)})}function D(){c.value===0?g.error("É necessário informar uma Bi-semana"):b.value===0?g.error("É necessário informar um Status"):axios.post("/GetPaineis",{ano:P.value,bisemana:c.value,statusPainel:b.value,cidade:B.value,regiao:k.value,bairro:R.value}).then(l=>{C.value=l.data,I.value=b.value})}function te(l){D()}function Z(l){j.value=l,z.value=w.clientes,c.value===0&&setTimeout(()=>{g.error("É necessário infrmar a Bi-semana Primeiro")},500)}function le(l,a,s,i){const x=U.value[l];x.classList,Object.values(u.value).includes(a)?(u.value.splice(u.value.indexOf(a),1),p.value.splice(p.value.indexOf(i),1),y.value.splice(u.value.indexOf(s),1),x.checked=!1):(u.value.push(a),p.value.push(i),y.value.push(s),x.checked=!0),u.value.length===0&&(p.value=[],y.value=[])}function O(){u.value=[],y.value=[],p.value=[],U.value.forEach(a=>{a.checked=!1})}function oe(){if(f.value){let l=W.value;$.value=!0,l.showModal()}}function ie(){C.value.forEach(l=>{M.push(l.identificacao)})}function ne(l){axios.post("/ReservaPainel",{clienteId:r.cliente,outdoorId:l,bsId:c.value,campanha:r.campanha,obs:r.observ,checkPi:f.value}).then(a=>{a.data.cod===0?g.error(a.data.msg):a.data.cod==1&&(g.success(a.data.msg),r.cliente="",r.campanha="",r.observ="",f.value=!1,setTimeout(()=>{D()},500))})}function de(l){setTimeout(()=>{L.value=1},2e3)}return(l,a)=>(o(),n(v,null,[S(J(me),{title:"Reservas"}),S(_e,null,{default:ue(()=>[e("div",we,[e("div",ge,[e("div",ke,[ye,e("h1",Ce,d(C.value.length),1)])]),e("div",Pe,[e("div",Be,[e("div",Re,[je,m(e("select",{class:"select-paineis",name:"ano",id:"ano","onUpdate:modelValue":a[0]||(a[0]=s=>P.value=s),onChange:a[1]||(a[1]=s=>ee())},[$e,(o(!0),n(v,null,_(T.anos,(s,i)=>(o(),n("option",{key:i,value:s.id},d(s.ano_bisemana),9,De))),128))],544),[[h,P.value]])]),e("div",Se,[Ve,m(e("select",{class:"select-paineis",name:"bi-semana",id:"bi-semama","onUpdate:modelValue":a[2]||(a[2]=s=>c.value=s),disabled:E.value,onChange:a[3]||(a[3]=s=>b.value=0)},[Ue,(o(!0),n(v,null,_(G.value,(s,i)=>(o(),n("option",{key:i,value:s.id},"BS: "+d(s.num_bisemana)+" "+d(new Date(s.inicio).toLocaleDateString())+" até "+d(new Date(s.fim).toLocaleDateString()),9,Ie))),128))],40,Te),[[h,c.value]])]),e("div",Ee,[Oe,m(e("select",{class:"select-paineis",name:"status",id:"status","onUpdate:modelValue":a[4]||(a[4]=s=>b.value=s),onChange:a[5]||(a[5]=s=>(D(),O()))},Ae,544),[[h,b.value]])]),e("div",Fe,[Ge,e("div",Ne,[e("div",qe,[S(J(xe),{disabled:"",modelValue:u.value,"onUpdate:modelValue":a[6]||(a[6]=s=>u.value=s),options:M,multiple:!0,searchable:!0,"close-on-select":!1,"show-labels":!1,placeholder:"Todos"},null,8,["modelValue","options"])]),e("div",We,[e("button",{onClick:a[7]||(a[7]=s=>O()),class:"botao max-h-10 bg-red-700 hover:bg-red-500"},"Limpar")])])])]),e("div",Ze,[e("div",He,[Je,m(e("select",{class:"select-paineis",name:"cidades",id:"cidades",disabled:E.value,"onUpdate:modelValue":a[8]||(a[8]=s=>B.value=s),onChange:a[9]||(a[9]=s=>(A.value=!1,se()))},[Qe,(o(!0),n(v,null,_(T.cidades,(s,i)=>(o(),n("option",{key:i,value:s.id},d(s.nome),9,Xe))),128))],40,Ke),[[h,B.value]])]),e("div",Ye,[es,m(e("select",{class:"select-paineis",name:"regioes",id:"regioes",disabled:A.value,"onUpdate:modelValue":a[10]||(a[10]=s=>k.value=s),onChange:a[11]||(a[11]=s=>(F.value=!1,ae()))},[as,(o(!0),n(v,null,_(N.value,(s,i)=>(o(),n("option",{key:i,value:s.id},d(s.nome),9,ts))),128))],40,ss),[[h,k.value]])]),e("div",ls,[os,m(e("select",{class:"select-paineis",name:"bairros",id:"bairros",disabled:F.value,"onUpdate:modelValue":a[12]||(a[12]=s=>R.value=s)},[ns,(o(!0),n(v,null,_(q.value,(s,i)=>(o(),n("option",{key:i,value:s.id},d(s.nome),9,ds))),128))],8,is),[[h,R.value]])]),e("div",cs,[e("button",{class:"botao bg-sky-700 hover:bg-sky-500",onClick:a[13]||(a[13]=s=>(D(),O()))},"Filtrar"),e("div",rs,[b.value==1?(o(),n("label",us,"Enviar Lista")):V("",!0),e("ul",ms,[vs,fs,e("li",null,[e("label",{for:"modal-download",onClick:a[14]||(a[14]=s=>de())},"Download do Relatório")])])])])])]),e("div",_s,[e("div",bs,[e("div",hs,[(o(!0),n(v,null,_(C.value,(s,i)=>(o(),n("div",{key:i,class:"card w-full sm:w-5/12 bg-base-100 border-2 rounded-md shadow-xl mt-4 sm:mr-4"},[e("div",{class:"card-body",id:i,onClick:x=>le(i,s.identificacao,s.id,s)},[e("div",xs,[e("input",{type:"checkbox",ref_for:!0,ref_key:"itemRefs",ref:U,class:"w-14 h-14 border-0 checkbox checkbox-success"},null,512)]),e("div",ws,[e("div",gs,[e("img",{class:"img-painel",src:Y(s.image_url),alt:"Bairro"},null,8,ks)]),e("div",ys,[e("div",Cs,[e("div",Ps,[e("h2",Bs,d(s.cnome),1),e("h2",Rs,"Região: "+d(s.rnome),1)]),e("div",js,[e("h2",$s,"Bairro: "+d(s.bnome),1),e("h2",Ds,"Identificação.: "+d(s.identificacao),1)])])])])],8,ps),e("div",Ss,[Vs,I.value==1?(o(),n("label",{key:0,for:"modal-reserva",class:"w-11/12 sm:w-10/12 h-10 botao-modal bg-green-700 hover:bg-green-500",onClick:x=>Z(s)}," Reservar ",8,Ts)):V("",!0),I.value==2?(o(),n("label",{key:1,onClick:x=>Z(s),for:"modal-canc-reserva",class:"w-11/12 sm:w-10/12 h-10 botao-modal bg-red-700 hover:bg-red-500"}," Cancelar ",8,Us)):V("",!0)])]))),128))])])]),Is,e("div",Es,[e("div",Os,[e("div",Ls,[Ms,zs,e("h3",As,"Identificação "+d(j.value.identificacao),1)]),e("form",null,[e("div",Fs,[e("div",Gs,[Ns,e("select",qs,[(o(!0),n(v,null,_(X.value,(s,i)=>(o(),n("option",{key:i,value:s.id},"BS: "+d(s.num_bisemana)+" "+d(new Date(s.inicio).toLocaleDateString())+" até "+d(new Date(s.fim).toLocaleDateString()),9,Ws))),128))])]),e("div",Zs,[Hs,m(e("select",{"onUpdate:modelValue":a[15]||(a[15]=s=>r.cliente=s),name:"",id:"",class:"select select-bordered",disabled:c.value==0},[(o(!0),n(v,null,_(z.value,(s,i)=>(o(),n("option",{key:i,value:s.id},d(s.nome_fantasia?s.nome_fantasia:s.razao_social),9,Ks))),128))],8,Js),[[h,r.cliente]])]),e("div",Qs,[Xs,m(e("input",{"onUpdate:modelValue":a[16]||(a[16]=s=>r.campanha=s),type:"text",name:"",id:"",class:"input input-bordered",disabled:c.value==0},null,8,Ys),[[K,r.campanha]])]),e("div",ea,[sa,m(e("textarea",{"onUpdate:modelValue":a[17]||(a[17]=s=>r.observ=s),name:"",id:"",class:"textarea textarea-bordered textarea-lg",disabled:c.value==0},null,8,aa),[[K,r.observ]])]),e("div",ta,[e("div",la,[e("label",oa,[ia,m(e("input",{type:"checkbox","onUpdate:modelValue":a[18]||(a[18]=s=>f.value=s),onClick:a[19]||(a[19]=s=>(f.value=!f.value,oe())),class:"checkbox checkbox-lg checkbox-success border-2 border-gray-400"},null,512),[[ve,f.value]])])])])]),e("div",na,[e("label",{for:"modal-reserva",class:Q(["w-full botao-modal",{"bg-slate-400":c.value==0,"hover:bg-slate-400":c.value==0}]),onClick:a[20]||(a[20]=s=>ne(j.value.id))},"Reservar",2)])]),e("dialog",{id:"modal_confirm",ref_key:"confPi",ref:W,class:Q(["bg-transparent flex justify-center",{hidden:!$.value}])},[e("form",da,[ca,ra,ua,e("div",ma,[e("div",va,[e("button",{class:"w-5/12 botao-primario",onClick:a[21]||(a[21]=s=>$.value=!1)},"Confirmar"),e("button",{onClick:a[22]||(a[22]=s=>(f.value=!1,$.value=!1)),class:"w-5/12 botao-danger"},"Ainda não !")])])])],2)])]),u.value.length>0?(o(),fe(he,{key:0,ambiente:w.ambiente,paineisChecked:p.value,bisemana:c.value,disp:L.value,id:"modal-disp"},null,8,["ambiente","paineisChecked","bisemana","disp"])):V("",!0),S(be,{painel:j.value,bisemana:c.value,onAtualizaPage:te},null,8,["painel","bisemana"])])]),_:1})],64))}};export{ka as default};
