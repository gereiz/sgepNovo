import{j as a,p as ee,h as re,s as ue,o as i,f as n,a as C,u as L,w as me,F as v,Z as ve,b as e,t as d,k as u,q as h,l as _,n as z,g as E,d as fe,v as se,x as _e}from"./app-946184b5.js";import{_ as be}from"./regiao-35565801.js";import{_ as he}from"./AuthenticatedLayout-70c8e322.js";import pe from"./ModalCancelRes-3f1e1232.js";import{g as xe,a as we,_ as ge,t as P}from"./ModalWpp-1e2ffb1b.js";import{s as ke}from"./vue-multiselect.esm-b286fb82.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./toastr-424a7485.js";import"./toastr.min-6a83bc52.js";import"./html2pdf.es-7238c9fe.js";const ye="/build/assets/spinner-0f1bcd37.png",Ce={class:"w-full h-screen pt-24 pb-32 mx-2 sm:mx-4"},Pe={class:"w-full h-14 flex mb-2"},Re={class:"w-2/12 h-14 flex items-center"},Be=e("h1",{class:"text-xl sm:text-4xl font-bold"},"Reservas",-1),je={class:"text-lg sm:text-2xl text-red-400 font-bold ml-2 sm:ml-4"},De={class:"w-full flex flex-row flex-wrap items-center justify-center mb-20 sm:mb-0"},$e={class:"w-full flex items-center sm:justify-center flex-wrap"},Ve={class:"w-5/12 sm:w-1/12 flex flex-col me-4 sm:me-6"},Se=e("label",{for:"bi-semana"},"Ano",-1),Le=e("option",{value:"0",selected:""},"Selecione",-1),Ee=["value"],Te={class:"w-5/12 sm:w-[20%] flex flex-col me-4 sm:me-6"},Me=e("label",{for:"bi-semana"},"Bi-Semana",-1),Ie=["disabled"],Ue=e("option",{value:"0",selected:"",disabled:""},"Selecione",-1),Oe=["value"],ze={class:"w-full sm:w-1/12 flex flex-col me-4 sm:me-6"},Ae=e("label",{for:"status"},"Status",-1),Ne=["disabled"],Ge=e("option",{value:"0"},"Todos",-1),Fe=e("option",{value:"1"},"Disponível",-1),qe=e("option",{value:"2"},"Reservado",-1),He=[Ge,Fe,qe],We={class:"w-full sm:w-4/12 flex flex-col sm:-mt-4 me-4 sm:me-6"},Ze=e("label",{class:"typo__label"},"Identificação",-1),Je={class:"w-full flex"},Ke={class:"w-9/12 me-4"},Qe={class:"w-2/12"},Xe={class:"w-full flex items-center justify-center flex-wrap"},Ye={class:"w-5/12 sm:w-[15%] flex flex-col me-4 sm:me-6"},es=e("label",{for:"cidades"},"Cidades",-1),ss=["disabled"],ts=e("option",{value:"0",selectedd:""},"Todas as Cidades",-1),as=["value"],ls={class:"w-5/12 sm:w-[13%] flex flex-col me-4 sm:me-6"},os=e("label",{for:"regioes"},"Regiões",-1),is=["disabled"],ns=e("option",{value:"0",selected:""},"Todas as Regiões",-1),ds=["value"],cs={class:"w-full sm:w-[20%] flex flex-col me-4 sm:me-6"},rs=e("label",{for:"bairros"},"Bairros",-1),us=["disabled"],ms=e("option",{value:"0",selected:""},"Todos os Bairros",-1),vs=["value"],fs={class:"space-x-4 mt-3.5 mb-2"},_s={class:"dropdown"},bs={key:0,tabindex:"0",class:"w-fit botao flex items-center bg-green-700 hover:bg-green-500 px-2 py-[0.7rem]"},hs=e("p",{id:"envia_lista"},"Enviar Lista",-1),ps={tabindex:"0",class:"w-56 -ml-10 dropdown-content z-[1] menu p-2 shadow bg-base-200 rounded-box mt-4"},xs=e("li",null,[e("a",null,"Envio por Email")],-1),ws={key:0,class:"botao w-fit px-2 bg-teal-700 hover:bg-teal-500"},gs={class:"card w-full max-h-[85%] bg-base-100 shadow-xl overflow-auto rounded-md"},ks={class:"card-body pt-1 sm:pt-2"},ys={class:"w-full flex flex-col flex-wrap sm:flex-row justify-center"},Cs=["id","onClick"],Ps={class:"flex justify-between"},Rs={class:"text-xs sm:card-title"},Bs={class:"text-xs sm:card-title text-red-500"},js={class:"w-full flex justify-end"},Ds={class:"w-full flex flex-col items-center"},$s={class:"w-full mb-4 sm:-ml-4"},Vs=["src"],Ss={class:"w-full sm:w-11/12 flex justify-center flex-wrap"},Ls={class:"w-full flex justify-between sm:justify-between flex-wrap space-y-4"},Es={class:"w-full flex flex-wrap justify-between sm:justify-between"},Ts={class:"text-xs sm:card-title"},Ms={class:"text-xs flex sm:card-title hover:text-red-700"},Is=["href"],Us=e("img",{class:"w-6 ms-4 sm:w-10 sm:hover:w-14 transition-all duration-500",src:be,alt:"Mapa"},null,-1),Os=[Us],zs={class:"w-full flex flex-wrap justify-between sm:justify-between"},As={class:"text-xs sm:card-title"},Ns={class:"w-full flex justify-center flex-wrap space-y-2 mb-4"},Gs=e("button",{class:"w-11/12 sm:w-10/12 botao bg-sky-700 hover:bg-sky-500"},"Detalhes",-1),Fs=["onClick"],qs=["onClick"],Hs=e("input",{type:"checkbox",id:"modal-reserva",class:"modal-toggle"},null,-1),Ws={class:"modal flex items-end md:items-center"},Zs={class:"modal-box"},Js={class:"flex mb-4"},Ks=e("label",{for:"modal-reserva",class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),Qs=e("h3",{class:"font-bold text-lg"},"Reservar Painel:",-1),Xs={class:"font-bold text-lg ml-2 text-red-500"},Ys={class:"w-full flex flex-col sm:flex-row flex-wrap space-y-4 sm:space-y-8"},et={class:"w-full flex flex-col"},st=e("span",{class:"label-text ml-1"},"Bi-semana",-1),tt={name:"",id:"",class:"select select-bordered",disabled:""},at=["value"],lt={class:"w-full sm:w-6/12 flex flex-col me-4"},ot=e("span",{class:"label-text ml-1"},"Cliente",-1),it=["disabled"],nt=["value"],dt={class:"w-full sm:w-5/12 flex flex-col"},ct=e("span",{class:"label-text ml-1"},"Campanha",-1),rt=["disabled"],ut={class:"w-full flex flex-col"},mt=e("span",{class:"label-text ml-1"},"Mensagem",-1),vt=["disabled"],ft={class:"w-full flex flex-col"},_t={class:"form-control"},bt={class:"cursor-pointer"},ht=e("span",{class:"label-text text-lg sm:text-xl me-4"},"Existe P. I. para esta reserva?",-1),pt={class:"modal-action"},xt={method:"dialog",class:"modal-box bg-white"},wt=e("h3",{class:"font-black text-2xl text-red-700 animate-pulse duration-200 text-center"},"ATENÇÃO!",-1),gt=e("p",{class:"py-4"},"Ao Marcar que existe uma P. I. para esta reserva não será mais possível alterá-la!",-1),kt=e("p",{class:"py-4"},"Confirme somente se tiver certeza da reserva.",-1),yt={class:"modal-action"},Ct={class:"w-full flex justify-center space-x-4"},Tt={__name:"ReservaPaineis",props:["ambiente","reservas","anos","paineis","clientes","bisemanas","cidades","regioes","bairros","whatsapp"],setup(T){const p=T;a(null);const M=a(!0),A=a(""),I=a([]),m=a([]),g=a([]),b=a([]),R=a(p.paineis),N=ee([]),G=a(""),k=a(""),U=a(!0),F=a(!0),q=a(!0),H=a(!0),B=a(0),c=a(0),x=a(0),j=a(0),y=a(0),D=a(0),W=a(0),Z=a(0),J=a(0),$=a(""),f=a(!1),K=a(null),V=a(!1),r=ee({cliente:"",campanha:"",observ:""}),Q=re(()=>Object.values(p.bisemanas).filter(t=>t.id===c.value));ue(()=>{de()});function te(){axios.post("/GetBisemanas",{bisemana:B.value}).then(l=>{W.value=Object.values(l.data),U.value=!1,c.value=0})}function ae(){axios.post("/GetRegioes",{idCid:j.value}).then(l=>{Z.value=Object.values(l.data),y.value=0,D.value=0})}function le(){axios.post("/GetBairros",{idReg:y.value}).then(l=>{J.value=Object.values(l.data)})}function S(){c.value===0?P.error("É necessário informar uma Bi-semana"):x.value===0?P.error("É necessário informar um Status"):axios.post("/GetPaineis",{ano:B.value,bisemana:c.value,statusPainel:x.value,cidade:j.value,regiao:y.value,bairro:D.value}).then(l=>{R.value=l.data,k.value=x.value})}function oe(l){S()}function X(l){$.value=l,G.value=p.clientes,c.value===0&&setTimeout(()=>{P.error("É necessário infrmar a Bi-semana Primeiro")},500)}function ie(l,t,s,o){const w=I.value[l];w.classList,Object.values(m.value).includes(t)?(m.value.splice(m.value.indexOf(t),1),g.value.splice(g.value.indexOf(o),1),b.value.splice(m.value.indexOf(s),1),w.checked=!1):(m.value.push(t),g.value.push(o),b.value.push(s),w.checked=!0),m.value.length===0&&(g.value=[],b.value=[])}function O(){m.value=[],b.value=[],g.value=[],I.value.forEach(t=>{t.checked=!1})}function ne(){if(f.value){let l=K.value;V.value=!0,l.showModal()}}function de(){R.value.forEach(l=>{N.push(l.identificacao)})}function ce(l){axios.post("/ReservaPainel",{clienteId:r.cliente,outdoorId:l,bsId:c.value,campanha:r.campanha,obs:r.observ,checkPi:f.value}).then(t=>{t.data.cod===0?P.error(t.data.msg):t.data.cod==1&&(P.success(t.data.msg),r.cliente="",r.campanha="",r.observ="",f.value=!1,setTimeout(()=>{S()},500))})}function Y(l){let t=document.getElementById("envia_lista");M.value=!1,axios.post("/setData",{numBs:c.value,idPaineis:b.value}).then(s=>{t.innerHTML="Carregando...",setTimeout(()=>{axios.post("/relDisponiveis",{tpEnvio:l}).then(o=>{console.log("Relatório gerado"),console.log(o.data),l=="wpp"?A.value=o.data:l=="pdf"&&window.open("/relDisponiveis","_blank"),t.innerHTML="Enviar Lista",M.value=!0}).catch(o=>{console.log("Relatório não gerado")})},2e3)}).catch(s=>{console.log("Dados não Enviados")})}return(l,t)=>(i(),n(v,null,[C(L(ve),{title:"Reservas"}),C(he,null,{default:me(()=>[e("div",Ce,[e("div",Pe,[e("div",Re,[Be,e("h1",je,d(R.value.length),1)])]),e("div",De,[e("div",$e,[e("div",Ve,[Se,u(e("select",{class:"select-paineis",name:"ano",id:"ano","onUpdate:modelValue":t[0]||(t[0]=s=>B.value=s),onChange:t[1]||(t[1]=s=>te())},[Le,(i(!0),n(v,null,_(T.anos,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.ano_bisemana),9,Ee))),128))],544),[[h,B.value]])]),e("div",Te,[Me,u(e("select",{class:"select-paineis",name:"bi-semana",id:"bi-semama","onUpdate:modelValue":t[2]||(t[2]=s=>c.value=s),disabled:U.value,onChange:t[3]||(t[3]=s=>(x.value=0,F.value=!1))},[Ue,(i(!0),n(v,null,_(W.value,(s,o)=>(i(),n("option",{key:o,value:s.id},"BS: "+d(s.num_bisemana)+" "+d(new Date(s.inicio).toLocaleDateString())+" até "+d(new Date(s.fim).toLocaleDateString()),9,Oe))),128))],40,Ie),[[h,c.value]])]),e("div",ze,[Ae,u(e("select",{class:"select-paineis",name:"status",id:"status",disabled:F.value,"onUpdate:modelValue":t[4]||(t[4]=s=>x.value=s),onChange:t[5]||(t[5]=s=>(S(),O()))},He,40,Ne),[[h,x.value]])]),e("div",We,[Ze,e("div",Je,[e("div",Ke,[C(L(ke),{disabled:"",modelValue:m.value,"onUpdate:modelValue":t[6]||(t[6]=s=>m.value=s),options:N,multiple:!0,searchable:!0,"close-on-select":!1,"show-labels":!1,placeholder:"Todos"},null,8,["modelValue","options"])]),e("div",Qe,[e("button",{onClick:t[7]||(t[7]=s=>O()),class:"botao max-h-10 bg-red-700 hover:bg-red-500"},"Limpar")])])])]),e("div",Xe,[e("div",Ye,[es,u(e("select",{class:"select-paineis",name:"cidades",id:"cidades",disabled:U.value,"onUpdate:modelValue":t[8]||(t[8]=s=>j.value=s),onChange:t[9]||(t[9]=s=>(q.value=!1,ae()))},[ts,(i(!0),n(v,null,_(T.cidades,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,as))),128))],40,ss),[[h,j.value]])]),e("div",ls,[os,u(e("select",{class:"select-paineis",name:"regioes",id:"regioes",disabled:q.value,"onUpdate:modelValue":t[10]||(t[10]=s=>y.value=s),onChange:t[11]||(t[11]=s=>(H.value=!1,le()))},[ns,(i(!0),n(v,null,_(Z.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,ds))),128))],40,is),[[h,y.value]])]),e("div",cs,[rs,u(e("select",{class:"select-paineis",name:"bairros",id:"bairros",disabled:H.value,"onUpdate:modelValue":t[12]||(t[12]=s=>D.value=s)},[ms,(i(!0),n(v,null,_(J.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,vs))),128))],8,us),[[h,D.value]])]),e("div",fs,[e("button",{class:"botao bg-sky-700 hover:bg-sky-500",onClick:t[13]||(t[13]=s=>(S(),O()))}," Filtrar "),e("div",_s,[b.value.length>0&&k.value==1?(i(),n("label",bs,[e("img",{src:ye,class:z(["w-4 h-4 me-2 animate-spin",{hidden:M.value}]),alt:"spinner"},null,2),hs])):E("",!0),e("ul",ps,[e("li",null,[e("label",{onClick:t[14]||(t[14]=s=>Y("wpp")),for:"modal-wpp"},"Envio por Whatsapp")]),xs,e("li",null,[e("label",{onClick:t[15]||(t[15]=s=>Y("pdf"))},"Download do Relatório")])])]),b.value.length>1&&k.value==1?(i(),n("button",ws," Reserva Multipla ")):E("",!0)])])]),e("div",gs,[e("div",ks,[e("div",ys,[(i(!0),n(v,null,_(R.value,(s,o)=>(i(),n("div",{key:o,class:"card w-full sm:w-5/12 bg-base-100 border-2 rounded-md shadow-xl mt-4 sm:mr-4"},[e("div",{class:"card-body",id:o,onClick:w=>ie(o,s.identificacao,s.id,s)},[e("div",Ps,[e("h2",Rs,d(s.cnome),1),e("h2",Bs,"Identificação.: "+d(s.identificacao),1)]),e("div",js,[e("input",{type:"checkbox",ref_for:!0,ref_key:"itemRefs",ref:I,class:"w-14 h-14 border-0 checkbox checkbox-success"},null,512)]),e("div",Ds,[e("div",$s,[e("img",{class:"img-painel",src:L(xe)(p.ambiente,s.image_url),alt:"Bairro"},null,8,Vs)]),e("div",Ss,[e("div",Ls,[e("div",Es,[e("h2",Ts,"Bairro: "+d(s.bnome),1),e("h2",Ms,[fe("Ver Localização "),e("a",{href:L(we)(s.latitude,s.longitude),target:"_blank"},Os,8,Is)])]),e("div",zs,[e("h2",As,"Localização: "+d(s.logradouro)+" - "+d(s.numero),1)])])])])],8,Cs),e("div",Ns,[Gs,k.value==1?(i(),n("label",{key:0,for:"modal-reserva",class:"w-11/12 sm:w-10/12 h-10 botao-modal bg-green-700 hover:bg-green-500",onClick:w=>X(s)}," Reservar ",8,Fs)):E("",!0),k.value==2?(i(),n("label",{key:1,onClick:w=>X(s),for:"modal-canc-reserva",class:"w-11/12 sm:w-10/12 h-10 botao-modal bg-red-700 hover:bg-red-500"}," Cancelar ",8,qs)):E("",!0)])]))),128))])])]),Hs,e("div",Ws,[e("div",Zs,[e("div",Js,[Ks,Qs,e("h3",Xs,"Identificação "+d($.value.identificacao),1)]),e("form",null,[e("div",Ys,[e("div",et,[st,e("select",tt,[(i(!0),n(v,null,_(Q.value,(s,o)=>(i(),n("option",{key:o,value:s.id},"BS: "+d(s.num_bisemana)+" "+d(new Date(s.inicio).toLocaleDateString())+" até "+d(new Date(s.fim).toLocaleDateString()),9,at))),128))])]),e("div",lt,[ot,u(e("select",{"onUpdate:modelValue":t[16]||(t[16]=s=>r.cliente=s),name:"",id:"",class:"select select-bordered",disabled:c.value==0},[(i(!0),n(v,null,_(G.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome_fantasia?s.nome_fantasia:s.razao_social),9,nt))),128))],8,it),[[h,r.cliente]])]),e("div",dt,[ct,u(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>r.campanha=s),type:"text",name:"",id:"",class:"input input-bordered",disabled:c.value==0},null,8,rt),[[se,r.campanha]])]),e("div",ut,[mt,u(e("textarea",{"onUpdate:modelValue":t[18]||(t[18]=s=>r.observ=s),name:"",id:"",class:"textarea textarea-bordered textarea-lg",disabled:c.value==0},null,8,vt),[[se,r.observ]])]),e("div",ft,[e("div",_t,[e("label",bt,[ht,u(e("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=s=>f.value=s),onClick:t[20]||(t[20]=s=>(f.value=!f.value,ne())),class:"checkbox checkbox-lg checkbox-success border-2 border-gray-400"},null,512),[[_e,f.value]])])])])]),e("div",pt,[e("label",{for:"modal-reserva",class:z(["w-full botao-modal",{"bg-slate-400":c.value==0,"hover:bg-slate-400":c.value==0}]),onClick:t[21]||(t[21]=s=>ce($.value.id))},"Reservar",2)])]),e("dialog",{id:"modal_confirm",ref_key:"confPi",ref:K,class:z(["bg-transparent flex justify-center",{hidden:!V.value}])},[e("form",xt,[wt,gt,kt,e("div",yt,[e("div",Ct,[e("button",{class:"w-5/12 botao-primario",onClick:t[22]||(t[22]=s=>V.value=!1)},"Confirmar"),e("button",{onClick:t[23]||(t[23]=s=>(f.value=!1,V.value=!1)),class:"w-5/12 botao-danger"},"Ainda não !")])])])],2)])]),C(ge,{listaClientes:p.clientes,whatsapp:p.whatsapp,bisemana:Q.value,linkrel:A.value},null,8,["listaClientes","whatsapp","bisemana","linkrel"]),C(pe,{painel:$.value,bisemana:c.value,onAtualizaPage:oe},null,8,["painel","bisemana"])])]),_:1})],64))}};export{Tt as default};
