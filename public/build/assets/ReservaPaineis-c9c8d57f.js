import{j as l,y as te,h as ve,q as fe,o as i,f as n,a as g,u as L,w as _e,F as v,Z as be,b as e,t as d,k as u,x as h,l as b,g as M,n as N,d as he,v as ae,z as pe}from"./app-33d20e05.js";import{_ as xe}from"./regiao-35565801.js";import{_ as we}from"./AuthenticatedLayout-60086f26.js";import ge from"./ModalCancelRes-15a641b8.js";import{g as ke,a as ye,_ as Ce,t as R}from"./ModalWpp-5e2bf55e.js";import Pe from"./ModalPiRes-d63b06b6.js";import{s as Be}from"./vue-multiselect.esm-65b84f91.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./toastr-f5e88c44.js";import"./toastr.min-88b7e0c9.js";import"./StepOne-70538d1c.js";import"./maska-82a16b27.js";import"./StepTwo-5f3f8686.js";import"./transition-6b739a78.js";const Re="/build/assets/spinner-0f1bcd37.png",je={class:"w-full h-screen pt-24 pb-32 mx-2 sm:mx-4"},De={class:"w-full h-14 flex mb-2"},$e={class:"w-2/12 h-14 flex items-center"},Ve=e("h1",{class:"text-xl sm:text-4xl font-bold"},"Reservas",-1),Se={class:"text-lg sm:text-2xl text-red-400 font-bold ml-2 sm:ml-4"},Te={class:"w-full flex flex-row flex-wrap items-center justify-center mb-20 sm:mb-0"},Ee={class:"w-full flex items-center sm:justify-center flex-wrap"},Le={class:"w-5/12 sm:w-1/12 flex flex-col me-4 sm:me-6"},Me=e("label",{for:"bi-semana"},"Ano",-1),Ue=e("option",{value:"0",selected:""},"Selecione",-1),Ie=["value"],ze={class:"w-5/12 sm:w-[20%] flex flex-col me-4 sm:me-6"},Oe=e("label",{for:"bi-semana"},"Bi-Semana",-1),Ae=["disabled"],Ne=e("option",{value:"0",selected:"",disabled:""},"Selecione",-1),Ge=["value"],Fe={class:"w-full sm:w-1/12 flex flex-col me-4 sm:me-6"},Ze=e("label",{for:"status"},"Status",-1),qe=["disabled"],He=e("option",{value:"0"},"Todos",-1),We=e("option",{value:"1"},"Disponível",-1),Je=e("option",{value:"2"},"Reservado",-1),Ke=[He,We,Je],Qe={class:"w-full sm:w-4/12 flex flex-col sm:-mt-4 me-4 sm:me-6"},Xe=e("label",{class:"typo__label"},"Identificação",-1),Ye={class:"w-full flex"},es={class:"w-9/12 me-4"},ss={class:"w-2/12"},ts={class:"w-full flex items-center sm:justify-center flex-wrap"},as={class:"w-5/12 sm:w-[15%] flex flex-col me-4 sm:me-6"},ls=e("label",{for:"cidades"},"Cidades",-1),os=["disabled"],is=e("option",{value:"0",selectedd:""},"Todas as Cidades",-1),ns=["value"],ds={class:"w-5/12 sm:w-[13%] flex flex-col me-4 sm:me-6"},cs=e("label",{for:"regioes"},"Regiões",-1),rs=["disabled"],us=e("option",{value:"0",selected:""},"Todas as Regiões",-1),ms=["value"],vs={class:"w-full sm:w-[20%] flex flex-col me-4 sm:me-6"},fs=e("label",{for:"bairros"},"Bairros",-1),_s=["disabled"],bs=e("option",{value:"0",selected:""},"Todos os Bairros",-1),hs=["value"],ps={class:"space-x-4 mt-3.5 mb-2"},xs={class:"dropdown"},ws={key:0,tabindex:"0",class:"w-fit botao flex items-center bg-green-700 hover:bg-green-500 px-2 py-[0.7rem]"},gs=e("p",{id:"envia_lista"},"Enviar Lista",-1),ks={tabindex:"0",class:"w-56 -ml-20 sm:-ml-10 dropdown-content z-[1] menu p-2 shadow bg-base-200 rounded-box mt-4"},ys=e("li",null,[e("a",null,"Envio por Email")],-1),Cs={class:"card w-full max-h-[85%] bg-base-100 shadow-xl overflow-auto rounded-md"},Ps={class:"card-body pt-1 sm:pt-2"},Bs={class:"w-full flex flex-col flex-wrap sm:flex-row justify-center"},Rs=["id","onClick"],js={class:"flex justify-between"},Ds={class:"text-xs sm:card-title"},$s={class:"text-xs sm:card-title text-red-500"},Vs={class:"w-full flex justify-end"},Ss={class:"w-full flex flex-col items-center"},Ts={class:"w-full mb-4 sm:-ml-4"},Es=["src"],Ls={class:"w-full sm:w-11/12 flex justify-center flex-wrap"},Ms={class:"w-full flex justify-between sm:justify-between flex-wrap space-y-4"},Us={class:"w-full flex flex-wrap justify-between sm:justify-between"},Is={class:"text-xs sm:card-title"},zs={class:"text-xs flex sm:card-title hover:text-red-700"},Os=["href"],As=e("img",{class:"w-6 ms-4 sm:w-10 sm:hover:w-14 transition-all duration-500",src:xe,alt:"Mapa"},null,-1),Ns=[As],Gs={class:"w-full flex flex-wrap justify-between sm:justify-between"},Fs={class:"text-xs sm:card-title"},Zs={class:"w-full flex justify-center flex-wrap space-y-2 mb-4"},qs=e("button",{class:"w-11/12 sm:w-10/12 botao bg-sky-700 hover:bg-sky-500"},"Detalhes",-1),Hs=["onClick"],Ws=["onClick"],Js=e("input",{type:"checkbox",id:"modal-reserva",class:"modal-toggle"},null,-1),Ks={class:"modal flex items-end md:items-center"},Qs={class:"modal-box"},Xs={class:"flex mb-4"},Ys=e("h3",{class:"font-bold text-lg"},"Reservar Painel:",-1),et={class:"font-bold text-lg ml-2 text-red-500"},st={class:"w-full flex flex-col sm:flex-row flex-wrap space-y-4 sm:space-y-8"},tt={class:"w-7/12 flex flex-col"},at=e("span",{class:"label-text ml-1"},"Bi-semana",-1),lt={name:"",id:"",class:"select select-bordered",disabled:""},ot=["value"],it={class:"w-full sm:w-6/12 flex flex-col me-4"},nt=e("span",{class:"label-text ml-1"},"Cliente",-1),dt=["disabled"],ct=e("option",{value:"0",selected:""},"Selecione o cliente",-1),rt=["value"],ut={class:"w-full sm:w-5/12 flex flex-col"},mt=e("span",{class:"label-text ml-1"},"Campanha",-1),vt=["disabled"],ft={class:"w-full flex flex-col"},_t=e("span",{class:"label-text ml-1"},"Mensagem",-1),bt=["disabled"],ht={class:"w-full flex flex-col"},pt={class:"form-control"},xt={class:"cursor-pointer"},wt=e("span",{class:"label-text text-lg sm:text-xl me-4"},"Existe P. I. para esta reserva?",-1),gt=["disabled"],kt={class:"modal-action"},yt={method:"dialog",class:"modal-box bg-white"},Ct=e("h3",{class:"font-black text-2xl text-red-700 animate-pulse duration-200 text-center"},"ATENÇÃO!",-1),Pt=e("p",{class:"py-4"},"Ao Marcar que existe uma P. I. para esta reserva não será mais possível alterá-la!",-1),Bt=e("p",{class:"py-4"},"Confirme somente se tiver certeza da reserva.",-1),Rt={class:"ModalAddPain-action"},jt={class:"w-full flex justify-center space-x-4"},Gt={__name:"ReservaPaineis",props:["ambiente","reservas","anos","paineis","clientes","bisemanas","cidades","regioes","bairros","whatsapp"],setup(U){const p=U,I=l(!0),G=l(""),j=l([]),m=l([]),x=l([]),f=l([]),k=l(p.paineis),F=te([]),Z=l(""),y=l("");l("");const z=l(!0),q=l(!0),H=l(!0),W=l(!0),D=l(0),r=l(0),w=l(0),$=l(0),C=l(0),V=l(0);l({});const J=l(0),K=l(0),Q=l(0),P=l(""),_=l(!1),X=l(null),S=l(!1),O=l(!1),c=te({cliente:0,campanha:"",observ:""}),Y=ve(()=>Object.values(p.bisemanas).filter(t=>t.id===r.value));fe(()=>{ue()});function le(){axios.post("/GetBisemanas",{bisemana:D.value}).then(a=>{J.value=Object.values(a.data),z.value=!1,r.value=0})}function oe(){axios.post("/GetRegioes",{idCid:$.value}).then(a=>{K.value=Object.values(a.data),C.value=0,V.value=0})}function ie(){axios.post("/GetBairros",{idReg:C.value}).then(a=>{Q.value=Object.values(a.data)})}function T(){r.value===0?R.error("É necessário informar uma Bi-semana"):w.value===0?R.error("É necessário informar um Status"):axios.post("/GetPaineis",{ano:D.value,bisemana:r.value,statusPainel:w.value,cidade:$.value,regiao:C.value,bairro:V.value}).then(a=>{k.value=a.data,y.value=w.value})}function ne(a){T()}function ee(a){P.value=a,Z.value=p.clientes,r.value===0&&setTimeout(()=>{R.error("É necessário infrmar a Bi-semana Primeiro")},500)}function de(a,t,s,o){const B=j.value[a];Object.values(m.value).includes(t)?(m.value.splice(m.value.indexOf(t),1),x.value.splice(x.value.indexOf(o),1),f.value.splice(f.value.indexOf(s),1),B.checked=!1):(m.value.push(t),x.value.push(o),f.value.push(s),B.checked=!0),m.value.length===0&&(x.value=[],f.value=[])}function ce(){let a=0;E(),k.value.forEach(t=>{let s=j.value[a];m.value.push(t.identificacao),x.value.push(t),f.value.push(t.id),s.checked=!0,a++})}function E(){m.value=[],f.value=[],x.value=[],j.value.forEach(t=>{t.checked=!1})}function re(){if(_.value){let a=X.value;S.value=!0,a.showModal()}}function ue(){k.value.forEach(a=>{F.push(a.identificacao)})}function me(a){axios.post("/ReservaPainel",{clienteId:c.cliente.id,outdoorId:a,bsId:r.value,campanha:c.campanha,obs:c.observ,checkPi:_.value}).then(t=>{t.data.cod===0?R.error(t.data.msg):t.data.cod==1&&(R.success(t.data.msg),c.cliente="",c.campanha="",c.observ="",_.value=!1,setTimeout(()=>{T()},500))})}function se(a){let t=document.getElementById("envia_lista");I.value=!1,axios.post("/setData",{numBs:r.value,idPaineis:f.value}).then(s=>{t.innerHTML="Carregando...",setTimeout(()=>{axios.post("/relDisponiveis",{tpEnvio:a}).then(o=>{console.log("Relatório gerado"),a=="wpp"?G.value=o.data:a=="pdf"&&window.open("/relDisponiveis","_blank"),t.innerHTML="Enviar Lista",I.value=!0}).catch(o=>{console.log("Relatório não gerado")})},2e3)}).catch(s=>{console.log("Dados não Enviados")})}function A(a){a=="t"?O.value=!0:O.value=!1}return(a,t)=>(i(),n(v,null,[g(L(be),{title:"Reservas"}),g(we,null,{default:_e(()=>[e("div",je,[e("div",De,[e("div",$e,[Ve,e("h1",Se,d(k.value.length),1)])]),e("div",Te,[e("div",Ee,[e("div",Le,[Me,u(e("select",{class:"select-paineis",name:"ano",id:"ano","onUpdate:modelValue":t[0]||(t[0]=s=>D.value=s),onChange:t[1]||(t[1]=s=>le())},[Ue,(i(!0),n(v,null,b(U.anos,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.ano_bisemana),9,Ie))),128))],544),[[h,D.value]])]),e("div",ze,[Oe,u(e("select",{class:"select-paineis",name:"bi-semana",id:"bi-semama","onUpdate:modelValue":t[2]||(t[2]=s=>r.value=s),disabled:z.value,onChange:t[3]||(t[3]=s=>(w.value=0,q.value=!1))},[Ne,(i(!0),n(v,null,b(J.value,(s,o)=>(i(),n("option",{key:o,value:s.id},"BS: "+d(s.num_bisemana)+" "+d(new Date(s.inicio).toLocaleDateString("pt-br",{timeZone:"UTC"}))+" até "+d(new Date(s.fim).toLocaleDateString("pt-br",{timeZone:"UTC"})),9,Ge))),128))],40,Ae),[[h,r.value]])]),e("div",Fe,[Ze,u(e("select",{class:"select-paineis",name:"status",id:"status",disabled:q.value,"onUpdate:modelValue":t[4]||(t[4]=s=>w.value=s),onChange:t[5]||(t[5]=s=>(T(),E()))},Ke,40,qe),[[h,w.value]])]),e("div",Qe,[Xe,e("div",Ye,[e("div",es,[g(L(Be),{disabled:"",modelValue:m.value,"onUpdate:modelValue":t[6]||(t[6]=s=>m.value=s),options:F,multiple:!0,searchable:!0,"close-on-select":!1,"show-labels":!1,placeholder:"Todos"},null,8,["modelValue","options"])]),e("div",ss,[e("button",{onClick:t[7]||(t[7]=s=>E()),class:"botao max-h-10 bg-red-700 hover:bg-red-500"},"Limpar")])])])]),e("div",ts,[e("div",as,[ls,u(e("select",{class:"select-paineis",name:"cidades",id:"cidades",disabled:z.value,"onUpdate:modelValue":t[8]||(t[8]=s=>$.value=s),onChange:t[9]||(t[9]=s=>(H.value=!1,oe()))},[is,(i(!0),n(v,null,b(U.cidades,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,ns))),128))],40,os),[[h,$.value]])]),e("div",ds,[cs,u(e("select",{class:"select-paineis",name:"regioes",id:"regioes",disabled:H.value,"onUpdate:modelValue":t[10]||(t[10]=s=>C.value=s),onChange:t[11]||(t[11]=s=>(W.value=!1,ie()))},[us,(i(!0),n(v,null,b(K.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,ms))),128))],40,rs),[[h,C.value]])]),e("div",vs,[fs,u(e("select",{class:"select-paineis",name:"bairros",id:"bairros",disabled:W.value,"onUpdate:modelValue":t[12]||(t[12]=s=>V.value=s)},[bs,(i(!0),n(v,null,b(Q.value,(s,o)=>(i(),n("option",{key:o,value:s.id},d(s.nome),9,hs))),128))],8,_s),[[h,V.value]])]),e("div",ps,[e("button",{class:"botao bg-sky-700 hover:bg-sky-500",onClick:t[13]||(t[13]=s=>(T(),E()))}," Filtrar "),y.value==1?(i(),n("button",{key:0,onClick:t[14]||(t[14]=s=>ce()),class:"botao w-32 max-h-10 bg-fuchsia-700 hover:bg-fuchsia-500"}," Marcar Todos ")):M("",!0),e("div",xs,[f.value.length>0&&y.value==1?(i(),n("label",ws,[e("img",{src:Re,class:N(["w-4 h-4 me-2 animate-spin",{hidden:I.value}]),alt:"spinner"},null,2),gs])):M("",!0),e("ul",ks,[e("li",null,[e("label",{onClick:t[15]||(t[15]=s=>se("wpp")),for:"modal-wpp"},"Envio por Whatsapp")]),ys,e("li",null,[e("label",{onClick:t[16]||(t[16]=s=>se("pdf"))},"Download do Relatório")])])])])])]),e("div",Cs,[e("div",Ps,[e("div",Bs,[(i(!0),n(v,null,b(k.value,(s,o)=>(i(),n("div",{key:o,class:"card w-full sm:w-5/12 bg-base-100 border-2 rounded-md shadow-xl mt-4 sm:mr-4"},[e("div",{class:"card-body",id:o,onClick:B=>de(o,s.identificacao,s.id,s)},[e("div",js,[e("h2",Ds,d(s.cnome),1),e("h2",$s,"Identificação.: "+d(s.identificacao),1)]),e("div",Vs,[e("input",{type:"checkbox",ref_for:!0,ref_key:"itemRefs",ref:j,class:"w-14 h-14 border-0 checkbox checkbox-success"},null,512)]),e("div",Ss,[e("div",Ts,[e("img",{class:"img-painel",src:L(ke)(p.ambiente,s.image_url),alt:"Bairro"},null,8,Es)]),e("div",Ls,[e("div",Ms,[e("div",Us,[e("h2",Is,"Bairro: "+d(s.bnome),1),e("h2",zs,[he("Ver Localização "),e("a",{href:L(ye)(s.latitude,s.longitude),target:"_blank"},Ns,8,Os)])]),e("div",Gs,[e("h2",Fs,"Localização: "+d(s.logradouro)+" - "+d(s.numero),1)])])])])],8,Rs),e("div",Zs,[qs,y.value==1?(i(),n("label",{key:0,for:"modal-reserva",class:"w-11/12 sm:w-10/12 h-10 botao-modal bg-green-700 hover:bg-green-500",onClick:B=>ee(s)}," Reservar ",8,Hs)):M("",!0),y.value==2?(i(),n("label",{key:1,onClick:B=>ee(s),for:"modal-canc-reserva",class:"w-11/12 sm:w-10/12 h-10 botao-modal bg-red-700 hover:bg-red-500"}," Cancelar ",8,Ws)):M("",!0)])]))),128))])])]),Js,e("div",Ks,[e("div",Qs,[e("div",Xs,[e("label",{for:"modal-reserva",class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",onClick:t[17]||(t[17]=s=>c.cliente=0)},"✕"),Ys,e("h3",et,"Identificação "+d(P.value.identificacao),1)]),e("form",null,[e("div",st,[e("div",tt,[at,e("select",lt,[(i(!0),n(v,null,b(Y.value,(s,o)=>(i(),n("option",{key:o,value:s.id},"BS: "+d(s.num_bisemana)+" "+d(new Date(s.inicio).toLocaleDateString())+" até "+d(new Date(s.fim).toLocaleDateString()),9,ot))),128))])]),e("div",it,[nt,u(e("select",{"onUpdate:modelValue":t[18]||(t[18]=s=>c.cliente=s),name:"",id:"",class:"select select-bordered",disabled:r.value==0},[ct,(i(!0),n(v,null,b(Z.value,(s,o)=>(i(),n("option",{key:o,value:s},d(s.nome_fantasia?s.nome_fantasia:s.razao_social),9,rt))),128))],8,dt),[[h,c.cliente]])]),e("div",ut,[mt,u(e("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>c.campanha=s),type:"text",name:"",id:"",class:"input input-bordered",disabled:r.value==0},null,8,vt),[[ae,c.campanha]])]),e("div",ft,[_t,u(e("textarea",{"onUpdate:modelValue":t[20]||(t[20]=s=>c.observ=s),name:"",id:"",class:"textarea textarea-bordered textarea-lg",disabled:r.value==0},null,8,bt),[[ae,c.observ]])]),e("div",ht,[e("div",pt,[e("label",xt,[wt,u(e("input",{type:"checkbox","onUpdate:modelValue":t[21]||(t[21]=s=>_.value=s),onClick:t[22]||(t[22]=s=>(_.value=!_.value,re())),class:"checkbox checkbox-lg checkbox-success border-2 border-gray-400",disabled:c.cliente===0},null,8,gt),[[pe,_.value]])])])])]),e("div",kt,[e("label",{for:"modal-reserva",class:N(["w-full botao-modal",{"bg-slate-400":r.value==0,"hover:bg-slate-400":r.value==0}]),onClick:t[23]||(t[23]=s=>me(P.value.id))},"Reservar",2)])]),e("dialog",{id:"modal_confirm",ref_key:"confPi",ref:X,class:N(["bg-transparent flex justify-center",{hidden:!S.value}])},[e("form",yt,[Ct,Pt,Bt,e("div",Rt,[e("div",jt,[e("button",{class:"w-5/12 botao-primario",onClick:t[24]||(t[24]=s=>(S.value=!1,A("t")))},"Confirmar"),e("button",{onClick:t[25]||(t[25]=s=>(_.value=!1,S.value=!1,A("f"))),class:"w-5/12 botao-danger"},"Ainda não !")])])])],2)])]),g(Ce,{listaClientes:p.clientes,whatsapp:p.whatsapp,bisemana:Y.value,linkrel:G.value},null,8,["listaClientes","whatsapp","bisemana","linkrel"]),g(ge,{painel:P.value,bisemana:r.value,onAtualizaPage:ne},null,8,["painel","bisemana"]),g(Pe,{openPi:O.value,cliente:c.cliente,campanha:c.campanha,painel:P.value,onClosePi:A},null,8,["openPi","cliente","campanha","painel"])])]),_:1})],64))}};export{Gt as default};
