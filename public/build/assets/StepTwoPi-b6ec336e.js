import{j as n,U as W,k as C,z as Y,o as v,f,b as e,a as N,u as x,t as h,m as l,v as g,y as T,F as q,p as E,n as R,$ as ee,l as A,V as te}from"./app-4ff54ba4.js";import{j as b}from"./maska-1eacf752.js";import{u as se}from"./toastr-9d5d101a.js";import{r as B}from"./UserCircleIcon-ac755e41.js";import"./toastr-e1375ee3.js";/* empty css                   */const oe={class:"space-y-6"},ae={class:"mt-3 text-center sm:mt-0 sm:text-left"},ne=e("h1",{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},"Pedido de Inserção",-1),ie={class:"flex mt-2"},le=e("p",{class:"text-sm text-gray-500 mb-4"},"Confira os dados para criação do Pedido de Inserção.",-1),de={class:"text-xs font-bold text-red-500 text-center"},re={class:"flex w-full space-x-6"},ce={class:"sm:w-5/12"},ue=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Painéis",-1),me={class:"mt-2"},ge={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},ve=e("span",{class:"flex select-none items-center pl-3 text-gray-500 sm:text-sm"},null,-1),fe={class:"w-6/12"},xe=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Campanha",-1),pe={class:"mt-2"},_e={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},he=e("span",{class:"flex select-none items-center pl-3 text-gray-500 sm:text-sm"},null,-1),be=["disabled"],we={class:"flex w-full space-x-6"},ye={class:"w-full"},ke=e("label",{for:"",class:"block text-sm font-medium leading-6 text-gray-900"},"Serviço:",-1),Se=["disabled"],Pe=e("option",{value:"0",disabled:""},"Selecione um Serviço",-1),Ve=["value"],Fe={class:"w-11/12 flex flex-wrap space-x-0 sm:space-x-6 space-y-4 sm:space-y-0 border sm:border-0 border-sky-300 rounded-lg py-4 mb-2 sm:mb-0"},Ue={class:"w-10/12 sm:w-8/12"},De=e("label",{for:"desc_servico",class:"block text-sm font-medium leading-6 text-gray-900"},"Serviço",-1),Ie={class:"mt-2"},Ce={class:"w-10/12 sm:w-3/12"},Te=e("label",{for:"quantidade",class:"block text-sm font-medium leading-6 text-gray-900"},"Quantidade",-1),qe={class:"mt-2"},Ee={class:"w-full flex justify-center space-x-4"},Ae={class:"w-10/12 sm:w-3/12"},Le=e("label",{for:"vlr_unit",class:"block text-sm font-medium leading-6 text-gray-900"},"Valor Unit.",-1),je={class:"mt-2"},Oe={class:"w-10/12 sm:w-3/12"},$e=e("label",{for:"vlr_desc",class:"block text-sm font-medium leading-6 text-gray-900"},"Desc. Unit.",-1),Ne={class:"mt-2"},Re={class:"w-10/12 sm:w-3/12"},Be=e("label",{for:"vlr_total",class:"block text-sm font-medium leading-6 text-gray-900"},"Valor Total",-1),Qe={class:"mt-2"},Me={class:"w-10/12 sm:w-1/12 pt-[1.95rem]"},ze={class:"w-full pt-4"},Xe=e("label",{for:"detalhes",class:"block text-sm font-medium leading-6 text-gray-900"},"Detalhes",-1),Ze={class:"mt-2"},Ge=["disabled"],He={class:"w-10/12 sm:w-[28%]"},Ke=e("label",{for:"desc_servico",class:"block text-sm font-medium leading-6 text-gray-900"},"Serviço",-1),Je={class:""},We=["value"],Ye={class:"w-10/12 sm:w-[15%]"},et=e("label",{for:"quantidade",class:"block text-sm font-medium leading-6 text-gray-900"},"Qtde.",-1),tt={class:""},st=["value"],ot={class:"w-10/12 sm:w-[20%]"},at=e("label",{for:"vlr_total",class:"block text-sm font-medium leading-6 text-gray-900"},"Valor Total",-1),nt={class:""},it=["value"],lt={class:"w-10/12 sm:w-[10%] pt-[1.45rem]"},dt=["onClick"],rt={class:"w-full flex flex-wrap justify-center sm:space-x-6 space-y-6 sm:space-y-0"},ct={class:"w-full sm:w-5/12"},ut=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Forma de Pagamento",-1),mt={class:"mt-2"},gt={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},vt=["disabled"],ft=te('<option value="0" disabled selected>SELECIONE</option><option value="1">A VISTA DINHEIRO</option><option value="2">A VISTA PIX</option><option value="3">CARTÃO</option><option value="4">BOLETO</option><option value="5">DEPÓSITO</option>',6),xt=[ft],pt={class:"w-5/12 sm:w-[20%] me-6"},_t=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Pago",-1),ht={class:"mt-2"},bt={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},wt=["disabled"],yt=e("option",{value:"",disabled:"",selected:""},"SEL...",-1),kt=e("option",{value:"0"},"NÃO",-1),St=e("option",{value:"1"},"SIM",-1),Pt=[yt,kt,St],Vt={class:"w-5/12 sm:w-3/12"},Ft=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Data Pagamento",-1),Ut={class:"mt-2"},Dt={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},It=e("span",{class:"flex select-none items-center pl-3 text-gray-500 sm:text-sm"},null,-1),Ct=["disabled"],Tt={class:"flex flex-wrap w-full space-x-6"},qt={class:"sm:w-3/12"},Et=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Data da Reserva",-1),At={class:"mt-2"},Lt={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 bg-gray-200"},jt=e("span",{class:"flex select-none items-center pl-3 text-gray-500 sm:text-sm"},null,-1),Ot={class:"sm:w-4/12"},$t=e("label",{class:"block text-sm font-medium leading-6 text-gray-900"},"Vendedor",-1),Nt={class:"mt-2"},Rt={class:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"},Bt=["disabled"],Qt=e("option",{value:"0",disabled:"",selected:""},"SELECIONE",-1),Mt=["value"],zt={class:"w-full sm:flex sm:flex-row-reverse"},Yt={__name:"StepTwoPi",props:["cliente","campanha","paineis","bisemana"],emits:["nextStep","formTwo"],setup(w,{emit:Q}){const r=se(),S=w,P=Q,m=n(!1);W();const V=n(),L=new Date,F=L.toLocaleDateString(),y=n(),U=n(),_=n(0),u=n(1),M=n(0),k=n(""),p=n([]),i=n(0),d=n(0),c=n(),D=n(""),z=n(L.toLocaleDateString()),X=n();C(i,a=>{i.value=a,o.vlr_unit=a,parseFloat(d.value)>parseFloat(i.value)?c.value=0:(c.value=((parseFloat(i.value)-parseFloat(d.value))*parseFloat(u.value)).toFixed(2),o.vlr_total=c.value)}),C(d,a=>{d.value=a,o.vlr_desc=a,parseFloat(d.value)>parseFloat(i.value)?c.value=0:(c.value=((parseFloat(i.value)-parseFloat(d.value))*parseFloat(u.value)).toFixed(2),o.vlr_total=c.value)}),C(u,a=>{u.value=a,parseFloat(d.value)>parseFloat(i.value)?c.value=0:(c.value=((parseFloat(i.value)-parseFloat(d.value))*parseFloat(u.value)).toFixed(2),o.vlr_total=c.value)});function Z(){return A.get("/getUsuarios").then(a=>{y.value=a.data}).catch(a=>{console.log(a)}),y}const G=a=>{V.value=y.value.find(t=>t.id==a),o.vendedorId=V.value.id,o.vendedor=V.value.name};function H(a){A.post("/GetServico",{id_servico:a}).then(t=>{M.value=t.data.id,k.value=t.data}).catch(t=>{r.error(res.data.message)})}function I(){return A.get("/ListaServicos").then(a=>{U.value=a.data.filter(t=>!p.value.some(s=>s.nome===t.nome))}).catch(a=>{console.log(a)}),U}function K(){if(parseInt(u.value)>parseInt(S.paineis[0].length)){r.error("Quantidade do serviço é maior que a quantidade de Painéis disponíveis!");return}if(parseInt(u.value)<1){r.error("Quantidade do serviço não pode ser menor que 1 !");return}if(parseFloat(i.value)<1){r.error("Valor Unitário do serviço não pode ser menor que 1.00 !");return}if(parseFloat(d.value)>parseFloat(i.value)){r.error("Valor do Desconto não pode ser maior que o Valor Unitário !");return}p.value.push({nome:k.value.nome,quantidade:u.value,vlr_unit:i.value,vlr_desc:d.value,vlr_total:c.value,detalhes:D.value}),_.value=0,u.value=1,i.value=0,d.value=0,I()}function J(a){p.value.splice(a,1),I()}const o=Y({paineis:S.paineis,campanha:S.campanha,servicos:p,formaPgto:0,pgto:"",dtPgto:z.value,dtReserva:X.value,vendedorId:"",vendedor:""}),j=a=>{if(a==1&&P("nextStep",a),a==3){if(p.value.length==0){r.error("Adicione ao menos um Serviço");return}if(o.formaPgto==0){r.error("Selecione a Forma de Pagamento");return}if(o.pgto==""){r.error("Informe se o Pedido foi Pago");return}if(o.pgto==1&&o.dtPgto==""){r.error("Informe a Data de Pagamento");return}if(o.pgto==1&&o.dtPgto.length<10||o.dtPgto.length>10){r.error("Data de Pagamento Inválida");return}if(o.pgto==1&&o.dtPgto.length==10){let t=o.dtPgto.split("/");if(new Date(t[2],t[1]-1,t[0])>new Date){r.error("Data de Pagamento não pode ser maior que a Data Atual");return}}if(o.vendedorId==0){r.error("Selecione o Vendedor");return}P("nextStep",a),P("formTwo",o)}};function O(){I(),Z(),m.value===!1&&(m.value=!0)}return(a,t)=>(v(),f("div",oe,[e("div",ae,[ne,e("div",ie,[le,m.value?(v(),f("button",{key:1,class:"w-8 h-8 flex items-center justify-center bg-green-700 -mt-1 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 rounded-full duration-1000",onClick:t[1]||(t[1]=s=>O()),title:"Edição Ativada"},[N(x(B),{class:"h-6 w-6","aria-hidden":"true"})])):(v(),f("button",{key:0,class:"w-8 h-8 flex items-center justify-center bg-amber-700 -mt-1 text-sm font-semibold text-white shadow-sm hover:bg-amber-500 sm:ml-3 rounded-full duration-1000",onClick:t[0]||(t[0]=s=>O()),title:"Ativar Edição"},[N(x(B),{class:"h-6 w-6","aria-hidden":"true"})]))]),e("p",de,"Bi-Semana: "+h(w.bisemana.num_bisemana)+" "+h(new Date(w.bisemana.inicio).toLocaleDateString("pt-br",{timeZone:"UTC"}))+" até "+h(new Date(w.bisemana.fim).toLocaleDateString("pt-br",{timeZone:"UTC"})),1)]),e("div",re,[e("div",ce,[ue,e("div",me,[e("div",ge,[ve,l(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>o.paineis=s),class:"h-9 block flex-1 border-0 bg-transparent py-1.5 pl-1 text-red-500 font-extrabold placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 text-xs",disabled:""},null,512),[[g,o.paineis]])])])]),e("div",fe,[xe,e("div",pe,[e("div",_e,[he,l(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>o.campanha=s),class:"h-9 block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 text-xs",disabled:m.value==!1},null,8,be),[[g,o.campanha]])])])])]),e("div",we,[e("div",ye,[ke,l(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>_.value=s),onChange:t[5]||(t[5]=s=>H(_.value)),class:"w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",disabled:m.value==!1},[Pe,(v(!0),f(q,null,E(U.value,s=>(v(),f("option",{key:s.id,value:s.id},h(s.nome),9,Ve))),128))],40,Se),[[T,_.value]])])]),e("div",{class:R([{hidden:_.value==0},"flex w-full space-x-6"])},[e("div",Fe,[e("div",Ue,[De,e("div",Ie,[l(e("input",{type:"text",disabled:"",name:"desc_servico",id:"desc_servico","onUpdate:modelValue":t[6]||(t[6]=s=>k.value.nome=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:leading-6 text-center"},null,512),[[g,k.value.nome]])])]),e("div",Ce,[Te,e("div",qe,[l(e("input",{type:"text",name:"quantidade",id:"quantidade","onUpdate:modelValue":t[7]||(t[7]=s=>u.value=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center"},null,512),[[g,u.value]])])]),e("div",Ee,[e("div",Ae,[Le,e("div",je,[l(e("input",{type:"text",name:"vlr_unit",id:"vlr_unit","onUpdate:modelValue":t[8]||(t[8]=s=>i.value=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center","data-maska":`[\r
                                    '##.##',\r
                                    '###.##',\r
                                    '####.##',\r
                                    '#####.##'\r
                                ]`},null,512),[[g,i.value],[x(b)]])])]),e("div",Oe,[$e,e("div",Ne,[l(e("input",{type:"text",name:"vlr_desc",id:"vlr_desc","onUpdate:modelValue":t[9]||(t[9]=s=>d.value=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center","data-maska":`[\r
                                    '##.##',\r
                                    '###.##',\r
                                    '####.##',\r
                                    '#####.##'\r
                                ]`},null,512),[[g,d.value],[x(b)]])])]),e("div",Re,[Be,e("div",Qe,[l(e("input",{type:"text",disabled:"",name:"vlr_total",id:"vlr_total","onUpdate:modelValue":t[10]||(t[10]=s=>c.value=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset bg-gray-200 ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center","data-maska":`[\r
                                    '##.##',\r
                                    '###.##',\r
                                    '####.##',\r
                                    '#####.##'\r
                                ]`},null,512),[[g,c.value],[x(b)]])])]),e("div",Me,[e("button",{onClick:t[11]||(t[11]=s=>K()),class:"flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500"},"OK")])]),e("div",ze,[Xe,e("div",Ze,[l(e("textarea",{name:"detalhes",id:"detalhes",rows:"2",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",disabled:m.value==!1,"onUpdate:modelValue":t[12]||(t[12]=s=>D.value=s)},null,8,Ge),[[g,D.value]])])])])],2),e("div",{class:R([{hidden:p.value.length==0},"w-full max-h-40 flex flex-col overflow-auto"])},[(v(!0),f(q,null,E(p.value,(s,$)=>(v(),f("div",{key:s.id,class:"w-11/12 flex flex-wrap space-x-0 sm:space-x-6 space-y-4 sm:space-y-0 border sm:border-0 border-sky-300 rounded-lg mb-2 sm:mb-4"},[e("div",He,[Ke,e("div",Je,[e("input",{type:"text",disabled:"",name:"desc_servico",id:"desc_servico",value:s.nome,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset bg-gray-200 ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:leading-6 text-center"},null,8,We)])]),e("div",Ye,[et,e("div",tt,[e("input",{type:"text",disabled:"",name:"quantidade",id:"quantidade",value:s.quantidade,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset bg-gray-200 ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center"},null,8,st)])]),e("div",ot,[at,e("div",nt,[l(e("input",{type:"text",disabled:"",name:"vlr_total",id:"vlr_total",value:s.vlr_total,class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset bg-gray-200 ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 text-center","data-maska":`[\r
                                '##.##',\r
                                '###.##',\r
                                '####.##',\r
                                '#####.##'\r
                            ]`},null,8,it),[[x(b)]])])]),e("div",lt,[e("button",{onClick:Xt=>J($),class:"flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500"},"X",8,dt)])]))),128))],2),e("div",rt,[e("div",ct,[ut,e("div",mt,[e("div",gt,[l(e("select",{id:"uf",name:"uf","onUpdate:modelValue":t[13]||(t[13]=s=>o.formaPgto=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6",disabled:m.value==!1},xt,8,vt),[[T,o.formaPgto]])])])]),e("div",pt,[_t,e("div",ht,[e("div",bt,[l(e("select",{id:"pagamento",name:"pagamento","onUpdate:modelValue":t[14]||(t[14]=s=>o.pgto=s),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6",disabled:m.value==!1},Pt,8,wt),[[T,o.pgto]])])])]),e("div",Vt,[Ft,e("div",Ut,[e("div",Dt,[It,l(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=s=>o.dtPgto=s),disabled:m.value==!1,class:"h-9 block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 text-xs","data-maska":"##/##/####"},null,8,Ct),[[g,o.dtPgto],[x(b)]])])])])]),e("div",Tt,[e("div",qt,[Et,e("div",At,[e("div",Lt,[jt,l(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=s=>ee(F)?F.value=s:null),disabled:"",class:"h-9 block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 text-xs"},null,512),[[g,x(F)]])])])]),e("div",Ot,[$t,e("div",Nt,[e("div",Rt,[e("select",{id:"vendedor",name:"vendedor",onChange:t[17]||(t[17]=s=>G(s.target.value)),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6",disabled:m.value==!1},[Qt,(v(!0),f(q,null,E(y.value,s=>(v(),f("option",{key:s.id,value:s.id},h(s.name),9,Mt))),128))],40,Bt)])])])]),e("div",zt,[e("label",{class:"inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 sm:w-auto",onClick:t[18]||(t[18]=s=>j(3))},"Avançar"),e("label",{class:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:t[19]||(t[19]=s=>j(1))},"Voltar")])]))}};export{Yt as default};
